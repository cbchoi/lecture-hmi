# Week 8: Python PySide6 ê³ ê¸‰ ê¸°ëŠ¥ ë° ì»¤ìŠ¤í…€ UI ì»´í¬ë„ŒíŠ¸

## ğŸ¯ **í•™ìŠµ ëª©í‘œ**
- **ì»¤ìŠ¤í…€ ìœ„ì ¯**: ì „ë¬¸ì ì¸ ë°˜ë„ì²´ HMIë¥¼ ìœ„í•œ ê³ ê¸‰ UI ì»´í¬ë„ŒíŠ¸ ê°œë°œ
- **3D ì‹œê°í™”**: OpenGL ê¸°ë°˜ ì‹¤ì‹œê°„ 3D ë Œë”ë§ ë° ì¥ë¹„ ëª¨ë¸ë§
- **ê³ ê¸‰ ì•„í‚¤í…ì²˜**: Model-View íŒ¨í„´ ê³ ë„í™” ë° í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ êµ¬ì¶•
- **UI/UX ìµœì í™”**: í˜„ëŒ€ì  ìŠ¤íƒ€ì¼ë§ ë° êµ­ì œí™” ì§€ì›

---

## ì»¤ìŠ¤í…€ ìœ„ì ¯ ê°œë°œ

### ğŸ¨ ì»¤ìŠ¤í…€ ìœ„ì ¯ì˜ í•„ìš”ì„±
- **í‘œì¤€ ìœ„ì ¯ í•œê³„**: ì‚°ì—…ìš© HMI ìš”êµ¬ì‚¬í•­ì— ë¶€ì¡±í•œ ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸
- **ë¸Œëœë”© ì¼ê´€ì„±**: íšŒì‚¬/ì œí’ˆ ê³ ìœ ì˜ ë””ìì¸ ì–¸ì–´ êµ¬í˜„
- **íŠ¹ìˆ˜ ê¸°ëŠ¥**: ë°˜ë„ì²´ ì¥ë¹„ íŠ¹í™” ì¸í„°í˜ì´ìŠ¤ ìš”ì†Œ
- **ì„±ëŠ¥ ìµœì í™”**: íŠ¹ì • ìš©ë„ì— ìµœì í™”ëœ ë Œë”ë§

### ğŸ—ï¸ ìœ„ì ¯ ê°œë°œ íŒ¨í„´
1. **Composition Pattern**: ê¸°ì¡´ ìœ„ì ¯ ì¡°í•©
2. **Inheritance Pattern**: QWidget ì§ì ‘ ìƒì†
3. **Custom Painting**: QPainter í™œìš© ì™„ì „ ì»¤ìŠ¤í…€
4. **Hybrid Approach**: í˜¼í•© ë°©ì‹

---

## QPainter ê¸°ë°˜ ì‚°ì—…ìš© ê²Œì´ì§€

### í•µì‹¬ êµ¬í˜„ ì˜ˆì œ

```python
class IndustrialGauge(QWidget):
    """ì‚°ì—…ìš© ê³„ê¸°íŒ ìœ„ì ¯"""

    def paintEvent(self, event):
        painter = QPainter(self)
        painter.setRenderHint(QPainter.Antialiasing)

        # ë°°ê²½, ëˆˆê¸ˆ, ë°”ëŠ˜ ìˆœì„œë¡œ ê·¸ë¦¬ê¸°
        self.draw_background(painter)
        self.draw_scale(painter)
        self.draw_needle(painter)
```

### ì£¼ìš” ê¸°ëŠ¥
- **ì‹¤ì‹œê°„ ë°ì´í„° ë°˜ì˜**: ì„¼ì„œê°’ì— ë”°ë¥¸ ë°”ëŠ˜ ìœ„ì¹˜ ë³€ê²½
- **ì„ê³„ê°’ í‘œì‹œ**: ê²½ê³ /ìœ„í—˜ ì˜ì—­ ìƒ‰ìƒ êµ¬ë¶„
- **ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜**: QPropertyAnimation í™œìš©

---

## 3D ì‹œê°í™” ë° OpenGL í†µí•©
        if self.value >= self.critical_threshold:
            needle_color = self.colors['critical']
        elif self.value >= self.warning_threshold:
            needle_color = self.colors['warning']
        else:
            needle_color = self.colors['normal']

        painter.setPen(QPen(needle_color, 4))

        # ë°”ëŠ˜ ê·¸ë¦¬ê¸°
        needle_length = radius - 30
        needle_x = center.x() + needle_length * math.cos(math.radians(current_angle))
        needle_y = center.y() + needle_length * math.sin(math.radians(current_angle))

        painter.drawLine(center, QPoint(int(needle_x), int(needle_y)))

        # ì¤‘ì‹¬ì  ê·¸ë¦¬ê¸°
        painter.setBrush(QBrush(needle_color))
        painter.drawEllipse(center, 8, 8)

        painter.restore()

    def draw_text(self, painter, rect):
        """í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°"""
        painter.setPen(QPen(Qt.white))
        painter.setFont(painter.font())

        # í˜„ì¬ ê°’ í‘œì‹œ
        text_rect = QRect(rect.x(), rect.bottom() - 40, rect.width(), 30)
        painter.drawText(text_rect, Qt.AlignCenter, f"{self.value:.1f}")

        # ë‹¨ìœ„ í‘œì‹œ
        unit_rect = QRect(rect.x(), rect.bottom() - 20, rect.width(), 20)
        painter.drawText(unit_rect, Qt.AlignCenter, "Â°C")

    def setValue(self, value):
        """ê°’ ì„¤ì •"""
        self.value = max(self.min_value, min(self.max_value, value))
        self.update()

    def setRange(self, min_val, max_val):
        """ë²”ìœ„ ì„¤ì •"""
        self.min_value = min_val
        self.max_value = max_val
        self.update()

    def setThresholds(self, warning, critical):
        """ì„ê³„ê°’ ì„¤ì •"""
        self.warning_threshold = warning
        self.critical_threshold = critical
        self.update()
```

##### **1.1.2 ìƒíƒœ ì¸ë””ì¼€ì´í„° ìœ„ì ¯**

<div class="code-block">

```python
from PySide6.QtWidgets import QWidget, QVBoxLayout, QHBoxLayout, QLabel
from PySide6.QtGui import QPainter, QBrush, QPen, QFont
from PySide6.QtCore import Qt, QRect, QTimer, Signal
from enum import Enum

class EquipmentStatus(Enum):
    """ì¥ë¹„ ìƒíƒœ ì—´ê±°í˜•"""
    OFFLINE = "offline"
    IDLE = "idle"
    RUNNING = "running"
    WARNING = "warning"
    ERROR = "error"
    MAINTENANCE = "maintenance"

class StatusIndicator(QWidget):
    """ìƒíƒœ ì¸ë””ì¼€ì´í„° ìœ„ì ¯"""

    status_changed = Signal(EquipmentStatus)

    def __init__(self, parent=None):
        super().__init__(parent)
        self.setFixedSize(120, 60)

        self.status = EquipmentStatus.OFFLINE
        self.is_blinking = False
        self.blink_state = True

        # ìƒíƒœë³„ ìƒ‰ìƒ ë§¤í•‘
        self.status_colors = {
            EquipmentStatus.OFFLINE: Qt.gray,
            EquipmentStatus.IDLE: Qt.blue,
            EquipmentStatus.RUNNING: Qt.green,
            EquipmentStatus.WARNING: Qt.yellow,
            EquipmentStatus.ERROR: Qt.red,
            EquipmentStatus.MAINTENANCE: Qt.magenta
        }

        # ê¹œë¹¡ì„ íƒ€ì´ë¨¸
        self.blink_timer = QTimer()
        self.blink_timer.timeout.connect(self.toggle_blink)

        # ìƒíƒœë³„ ê¹œë¹¡ì„ ì„¤ì •
        self.blinking_statuses = {EquipmentStatus.WARNING, EquipmentStatus.ERROR}

    def paintEvent(self, event):
        """ì»¤ìŠ¤í…€ í˜ì¸íŒ…"""
        painter = QPainter(self)
        painter.setRenderHint(QPainter.Antialiasing)

        rect = self.rect()

        # ë°°ê²½ ê·¸ë¦¬ê¸°
        painter.setPen(QPen(Qt.darkGray, 2))
        painter.setBrush(QBrush(Qt.black))
        painter.drawRoundedRect(rect.adjusted(2, 2, -2, -2), 8, 8)

        # ìƒíƒœ LED ê·¸ë¦¬ê¸°
        led_rect = QRect(10, 10, 30, 30)
        self.draw_led(painter, led_rect)

        # í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°
        text_rect = QRect(50, 10, 60, 40)
        self.draw_status_text(painter, text_rect)

    def draw_led(self, painter, rect):
        """LED ê·¸ë¦¬ê¸°"""
        color = self.status_colors[self.status]

        # ê¹œë¹¡ì„ ì²˜ë¦¬
        if self.is_blinking and not self.blink_state:
            color = Qt.darkGray

        # LED ì™¸ê³½
        painter.setPen(QPen(Qt.white, 1))
        painter.setBrush(QBrush(color))
        painter.drawEllipse(rect)

        # LED í•˜ì´ë¼ì´íŠ¸
        highlight_rect = QRect(rect.x() + 3, rect.y() + 3, 8, 8)
        painter.setBrush(QBrush(Qt.white))
        painter.drawEllipse(highlight_rect)

    def draw_status_text(self, painter, rect):
        """ìƒíƒœ í…ìŠ¤íŠ¸ ê·¸ë¦¬ê¸°"""
        painter.setPen(QPen(Qt.white))
        painter.setFont(QFont("Arial", 9, QFont.Bold))

        status_text = self.status.value.upper()
        painter.drawText(rect, Qt.AlignCenter, status_text)

    def set_status(self, status: EquipmentStatus):
        """ìƒíƒœ ì„¤ì •"""
        if self.status != status:
            self.status = status

            # ê¹œë¹¡ì„ ì œì–´
            if status in self.blinking_statuses:
                self.start_blinking()
            else:
                self.stop_blinking()

            self.status_changed.emit(status)
            self.update()

    def start_blinking(self):
        """ê¹œë¹¡ì„ ì‹œì‘"""
        self.is_blinking = True
        self.blink_timer.start(500)  # 500ms ê°„ê²©

    def stop_blinking(self):
        """ê¹œë¹¡ì„ ì¤‘ì§€"""
        self.is_blinking = False
        self.blink_timer.stop()
        self.blink_state = True
        self.update()

    def toggle_blink(self):
        """ê¹œë¹¡ì„ í† ê¸€"""
        self.blink_state = not self.blink_state
        self.update()

class EquipmentPanel(QWidget):
    """ì¥ë¹„ íŒ¨ë„ ìœ„ì ¯"""

    def __init__(self, equipment_name, parent=None):
        super().__init__(parent)
        self.equipment_name = equipment_name
        self.setup_ui()

    def setup_ui(self):
        """UI ì„¤ì •"""
        layout = QVBoxLayout(self)

        # ì œëª©
        title_label = QLabel(self.equipment_name)
        title_label.setFont(QFont("Arial", 12, QFont.Bold))
        title_label.setAlignment(Qt.AlignCenter)
        layout.addWidget(title_label)

        # ìƒíƒœ ì¸ë””ì¼€ì´í„°ë“¤
        indicators_layout = QHBoxLayout()

        self.power_indicator = StatusIndicator()
        self.process_indicator = StatusIndicator()
        self.alarm_indicator = StatusIndicator()

        indicators_layout.addWidget(self.create_labeled_indicator("ì „ì›", self.power_indicator))
        indicators_layout.addWidget(self.create_labeled_indicator("í”„ë¡œì„¸ìŠ¤", self.process_indicator))
        indicators_layout.addWidget(self.create_labeled_indicator("ì•ŒëŒ", self.alarm_indicator))

        layout.addLayout(indicators_layout)

        # ì´ˆê¸° ìƒíƒœ ì„¤ì •
        self.power_indicator.set_status(EquipmentStatus.IDLE)
        self.process_indicator.set_status(EquipmentStatus.OFFLINE)
        self.alarm_indicator.set_status(EquipmentStatus.OFFLINE)

    def create_labeled_indicator(self, label_text, indicator):
        """ë¼ë²¨ì´ ìˆëŠ” ì¸ë””ì¼€ì´í„° ìƒì„±"""
        widget = QWidget()
        layout = QVBoxLayout(widget)

        label = QLabel(label_text)
        label.setAlignment(Qt.AlignCenter)
        label.setFont(QFont("Arial", 8))

        layout.addWidget(label)
        layout.addWidget(indicator)

        return widget

    def update_equipment_status(self, power_on, process_running, has_alarm):
        """ì¥ë¹„ ìƒíƒœ ì—…ë°ì´íŠ¸"""
        # ì „ì› ìƒíƒœ
        if power_on:
            self.power_indicator.set_status(EquipmentStatus.RUNNING)
        else:
            self.power_indicator.set_status(EquipmentStatus.OFFLINE)

        # í”„ë¡œì„¸ìŠ¤ ìƒíƒœ
        if power_on and process_running:
            self.process_indicator.set_status(EquipmentStatus.RUNNING)
        elif power_on:
            self.process_indicator.set_status(EquipmentStatus.IDLE)
        else:
            self.process_indicator.set_status(EquipmentStatus.OFFLINE)

        # ì•ŒëŒ ìƒíƒœ
        if has_alarm:
            self.alarm_indicator.set_status(EquipmentStatus.ERROR)
        else:
            self.alarm_indicator.set_status(EquipmentStatus.OFFLINE)
```

</div>

#### **1.2 Model-View ì•„í‚¤í…ì²˜ ê³ ë„í™”**

##### **1.2.1 ê³ ì„±ëŠ¥ ë°ì´í„° ëª¨ë¸**

<div class="architecture-section">

**ğŸ—ï¸ ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ Model-View ìµœì í™”**:

```python
from PySide6.QtCore import QAbstractTableModel, Qt, QModelIndex, QVariant, Signal
from PySide6.QtGui import QColor, QFont
from datetime import datetime
import numpy as np
from typing import List, Any, Optional

class HighPerformanceDataModel(QAbstractTableModel):
    """ê³ ì„±ëŠ¥ ë°ì´í„° í…Œì´ë¸” ëª¨ë¸"""

    data_changed_signal = Signal(int, int)  # row, column

    def __init__(self, parent=None):
        super().__init__(parent)

        # ë°ì´í„° ì €ì¥ì†Œ (NumPy ë°°ì—´ ì‚¬ìš©ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”)
        self.data_buffer = np.empty((0, 8), dtype=object)  # ì´ˆê¸° ë¹ˆ ë°°ì—´
        self.max_rows = 10000  # ìµœëŒ€ í–‰ ìˆ˜
        self.current_row_count = 0

        # í—¤ë” ì •ì˜
        self.headers = [
            "Timestamp", "Temperature", "Pressure", "Flow Rate",
            "RF Power", "Recipe Step", "Status", "Alarms"
        ]

        # ì»¬ëŸ¼ë³„ ë°ì´í„° íƒ€ì…
        self.column_types = [
            datetime, float, float, float, float, int, str, str
        ]

        # ì‹œê°ì  í¬ë§·íŒ…ì„ ìœ„í•œ ì„¤ì •
        self.warning_thresholds = {
            1: (300, 400),  # Temperature
            2: (1.0, 10.0), # Pressure
            3: (50, 200),   # Flow Rate
            4: (200, 500)   # RF Power
        }

    def rowCount(self, parent=QModelIndex()):
        """í–‰ ìˆ˜ ë°˜í™˜"""
        return self.current_row_count

    def columnCount(self, parent=QModelIndex()):
        """ì—´ ìˆ˜ ë°˜í™˜"""
        return len(self.headers)

    def data(self, index, role=Qt.DisplayRole):
        """ë°ì´í„° ë°˜í™˜"""
        if not index.isValid():
            return QVariant()

        row = index.row()
        col = index.column()

        if row >= self.current_row_count or col >= len(self.headers):
            return QVariant()

        value = self.data_buffer[row, col]

        if role == Qt.DisplayRole:
            return self.format_display_value(value, col)
        elif role == Qt.BackgroundRole:
            return self.get_background_color(value, col)
        elif role == Qt.TextAlignmentRole:
            return Qt.AlignCenter if col > 0 else Qt.AlignLeft
        elif role == Qt.FontRole:
            if col == 6:  # Status column
                font = QFont()
                font.setBold(True)
                return font

        return QVariant()

    def headerData(self, section, orientation, role=Qt.DisplayRole):
        """í—¤ë” ë°ì´í„° ë°˜í™˜"""
        if orientation == Qt.Horizontal and role == Qt.DisplayRole:
            return self.headers[section]
        elif orientation == Qt.Vertical and role == Qt.DisplayRole:
            return str(section + 1)

        return QVariant()

    def format_display_value(self, value, column):
        """í‘œì‹œê°’ í¬ë§·íŒ…"""
        if value is None:
            return ""

        if column == 0:  # Timestamp
            if isinstance(value, datetime):
                return value.strftime("%H:%M:%S.%f")[:-3]
        elif column in [1, 2, 3, 4]:  # Numeric columns
            if isinstance(value, (int, float)):
                if column == 1:  # Temperature
                    return f"{value:.1f}Â°C"
                elif column == 2:  # Pressure
                    return f"{value:.2f}Torr"
                elif column == 3:  # Flow Rate
                    return f"{value:.1f}sccm"
                elif column == 4:  # RF Power
                    return f"{value:.0f}W"
        elif column == 5:  # Recipe Step
            return f"Step {value}" if value else "N/A"

        return str(value)

    def get_background_color(self, value, column):
        """ë°°ê²½ìƒ‰ ê²°ì •"""
        if column in self.warning_thresholds and isinstance(value, (int, float)):
            min_val, max_val = self.warning_thresholds[column]

            if value < min_val or value > max_val:
                return QColor(255, 200, 200)  # ì—°í•œ ë¹¨ê°•
            elif abs(value - min_val) < (max_val - min_val) * 0.1 or \
                 abs(value - max_val) < (max_val - min_val) * 0.1:
                return QColor(255, 255, 200)  # ì—°í•œ ë…¸ë‘

        return QVariant()

    def add_data_point(self, data_point: dict):
        """ë°ì´í„° í¬ì¸íŠ¸ ì¶”ê°€ (ìµœì í™”ëœ ë°°ì¹˜ ì‚½ì…)"""
        # ë°°ì—´ í¬ê¸° í™•ì¥ í•„ìš” ì‹œ
        if self.current_row_count >= self.data_buffer.shape[0]:
            self.expand_buffer()

        # ìµœëŒ€ í–‰ ìˆ˜ ì œí•œ
        if self.current_row_count >= self.max_rows:
            self.remove_oldest_rows(1000)  # 1000ê°œ í–‰ ì œê±°

        # ë°ì´í„° ë³€í™˜ ë° ì‚½ì…
        row_data = [
            data_point.get('timestamp', datetime.now()),
            data_point.get('chamber_temperature', 0.0),
            data_point.get('chamber_pressure', 0.0),
            data_point.get('gas_flow_rate', 0.0),
            data_point.get('rf_power', 0.0),
            data_point.get('recipe_step', 0),
            data_point.get('status', 'Unknown'),
            data_point.get('alarms', '')
        ]

        # í–‰ ì‚½ì… ì‹œì‘
        self.beginInsertRows(QModelIndex(), self.current_row_count, self.current_row_count)

        # ë°ì´í„° ì €ì¥
        self.data_buffer[self.current_row_count] = row_data
        self.current_row_count += 1

        # í–‰ ì‚½ì… ì™„ë£Œ
        self.endInsertRows()

        # ì‹œê·¸ë„ ë°œì†¡
        self.data_changed_signal.emit(self.current_row_count - 1, -1)

    def add_data_batch(self, data_points: List[dict]):
        """ë°°ì¹˜ ë°ì´í„° ì¶”ê°€ (ì„±ëŠ¥ ìµœì í™”)"""
        if not data_points:
            return

        batch_size = len(data_points)

        # í•„ìš”í•œ ê³µê°„ í™•ë³´
        while self.current_row_count + batch_size > self.data_buffer.shape[0]:
            self.expand_buffer()

        # ìµœëŒ€ í–‰ ìˆ˜ ì œí•œ
        if self.current_row_count + batch_size > self.max_rows:
            remove_count = (self.current_row_count + batch_size) - self.max_rows + 1000
            self.remove_oldest_rows(remove_count)

        # ë°°ì¹˜ ì‚½ì… ì‹œì‘
        start_row = self.current_row_count
        end_row = start_row + batch_size - 1

        self.beginInsertRows(QModelIndex(), start_row, end_row)

        # ë°°ì¹˜ ë°ì´í„° ë³€í™˜ ë° ì €ì¥
        for i, data_point in enumerate(data_points):
            row_data = [
                data_point.get('timestamp', datetime.now()),
                data_point.get('chamber_temperature', 0.0),
                data_point.get('chamber_pressure', 0.0),
                data_point.get('gas_flow_rate', 0.0),
                data_point.get('rf_power', 0.0),
                data_point.get('recipe_step', 0),
                data_point.get('status', 'Unknown'),
                data_point.get('alarms', '')
            ]
            self.data_buffer[self.current_row_count + i] = row_data

        self.current_row_count += batch_size

        # ë°°ì¹˜ ì‚½ì… ì™„ë£Œ
        self.endInsertRows()

    def expand_buffer(self):
        """ë²„í¼ í¬ê¸° í™•ì¥"""
        current_size = self.data_buffer.shape[0]
        new_size = max(1000, current_size * 2)  # ìµœì†Œ 1000, ë˜ëŠ” 2ë°°ë¡œ í™•ì¥

        new_buffer = np.empty((new_size, self.data_buffer.shape[1]), dtype=object)
        new_buffer[:current_size] = self.data_buffer
        self.data_buffer = new_buffer

    def remove_oldest_rows(self, count):
        """ì˜¤ë˜ëœ í–‰ ì œê±°"""
        if count >= self.current_row_count:
            self.clear_data()
            return

        # í–‰ ì œê±° ì‹œì‘
        self.beginRemoveRows(QModelIndex(), 0, count - 1)

        # ë°ì´í„° ì´ë™
        remaining_count = self.current_row_count - count
        self.data_buffer[:remaining_count] = self.data_buffer[count:self.current_row_count]
        self.current_row_count = remaining_count

        # í–‰ ì œê±° ì™„ë£Œ
        self.endRemoveRows()

    def clear_data(self):
        """ëª¨ë“  ë°ì´í„° í´ë¦¬ì–´"""
        if self.current_row_count == 0:
            return

        self.beginRemoveRows(QModelIndex(), 0, self.current_row_count - 1)
        self.current_row_count = 0
        self.endRemoveRows()

    def get_data_range(self, start_row, end_row):
        """ë°ì´í„° ë²”ìœ„ ë°˜í™˜"""
        if start_row < 0 or end_row >= self.current_row_count:
            return []

        return self.data_buffer[start_row:end_row + 1].tolist()

    def export_to_dict_list(self):
        """ë”•ì…”ë„ˆë¦¬ ë¦¬ìŠ¤íŠ¸ë¡œ ë‚´ë³´ë‚´ê¸°"""
        result = []
        for row in range(self.current_row_count):
            row_dict = {}
            for col, header in enumerate(self.headers):
                row_dict[header] = self.data_buffer[row, col]
            result.append(row_dict)
        return result
```

</div>

#### **1.3 3D ì‹œê°í™” ë° ê·¸ë˜í”½ìŠ¤**

##### **1.3.1 OpenGL ê¸°ë°˜ 3D ë Œë”ë§**

<div class="graphics-section">

**ğŸ® 3D ì‹œê°í™”ì˜ ì¥ì **:
- **ì§ê´€ì  í‘œí˜„**: ë³µì¡í•œ ì¥ë¹„ êµ¬ì¡°ì˜ 3ì°¨ì›ì  ì´í•´
- **ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§**: ì¥ë¹„ ìƒíƒœì˜ ì‹œê°ì  í”¼ë“œë°±
- **ê³µê°„ì  ê´€ê³„**: ì„¼ì„œ ìœ„ì¹˜ ë° í”„ë¡œì„¸ìŠ¤ íë¦„ í‘œí˜„
- **ëª°ì…ê°**: ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ

```python
from PySide6.QtOpenGLWidgets import QOpenGLWidget
from PySide6.QtOpenGL import QOpenGLShaderProgram, QOpenGLBuffer
from PySide6.QtGui import QMatrix4x4, QVector3D, QQuaternion
from PySide6.QtCore import QTimer, Signal
import numpy as np
from OpenGL.GL import *
import math

class Equipment3DView(QOpenGLWidget):
    """3D ì¥ë¹„ ì‹œê°í™” ìœ„ì ¯"""

    equipment_clicked = Signal(str)  # ì¥ë¹„ ë¶€í’ˆ í´ë¦­ ì‹œê·¸ë„

    def __init__(self, parent=None):
        super().__init__(parent)

        # 3D ì†ì„±
        self.rotation_x = 15.0
        self.rotation_y = 45.0
        self.zoom = 1.0

        # ë§ˆìš°ìŠ¤ ìƒí˜¸ì‘ìš©
        self.last_mouse_pos = None
        self.mouse_buttons = 0

        # 3D ëª¨ë¸ ë°ì´í„°
        self.equipment_models = {}
        self.load_equipment_models()

        # ì• ë‹ˆë©”ì´ì…˜ íƒ€ì´ë¨¸
        self.animation_timer = QTimer()
        self.animation_timer.timeout.connect(self.animate)
        self.animation_timer.start(16)  # 60 FPS

        # ì„¼ì„œ ë°ì´í„° ì‹œê°í™”
        self.sensor_data = {}
        self.temperature_color_map = {
            'cold': (0.0, 0.0, 1.0),   # íŒŒë‘
            'normal': (0.0, 1.0, 0.0), # ë…¹ìƒ‰
            'hot': (1.0, 1.0, 0.0),    # ë…¸ë‘
            'critical': (1.0, 0.0, 0.0) # ë¹¨ê°•
        }

    def initializeGL(self):
        """OpenGL ì´ˆê¸°í™”"""
        # ê¹Šì´ í…ŒìŠ¤íŠ¸ í™œì„±í™”
        glEnable(GL_DEPTH_TEST)
        glDepthFunc(GL_LESS)

        # ë’·ë©´ ì œê±°
        glEnable(GL_CULL_FACE)
        glCullFace(GL_BACK)

        # ì¡°ëª… ì„¤ì •
        glEnable(GL_LIGHTING)
        glEnable(GL_LIGHT0)

        # ì¡°ëª… ì†ì„± ì„¤ì •
        light_position = [2.0, 2.0, 2.0, 1.0]
        light_ambient = [0.2, 0.2, 0.2, 1.0]
        light_diffuse = [0.8, 0.8, 0.8, 1.0]
        light_specular = [1.0, 1.0, 1.0, 1.0]

        glLightfv(GL_LIGHT0, GL_POSITION, light_position)
        glLightfv(GL_LIGHT0, GL_AMBIENT, light_ambient)
        glLightfv(GL_LIGHT0, GL_DIFFUSE, light_diffuse)
        glLightfv(GL_LIGHT0, GL_SPECULAR, light_specular)

        # ë°°ê²½ìƒ‰ ì„¤ì •
        glClearColor(0.1, 0.1, 0.2, 1.0)

    def resizeGL(self, width, height):
        """ë·°í¬íŠ¸ í¬ê¸° ë³€ê²½"""
        glViewport(0, 0, width, height)

        # íˆ¬ì˜ í–‰ë ¬ ì„¤ì •
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()

        aspect_ratio = width / height if height != 0 else 1
        fov = 45.0
        near_plane = 0.1
        far_plane = 100.0

        # ì›ê·¼ íˆ¬ì˜
        f = 1.0 / math.tan(math.radians(fov) / 2.0)
        glFrustum(-aspect_ratio / f, aspect_ratio / f, -1.0 / f, 1.0 / f, near_plane, far_plane)

    def paintGL(self):
        """3D ë Œë”ë§"""
        # í™”ë©´ í´ë¦¬ì–´
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

        # ëª¨ë¸ë·° í–‰ë ¬ ì„¤ì •
        glMatrixMode(GL_MODELVIEW)
        glLoadIdentity()

        # ì¹´ë©”ë¼ ìœ„ì¹˜ ì„¤ì •
        glTranslatef(0.0, 0.0, -5.0 * self.zoom)
        glRotatef(self.rotation_x, 1.0, 0.0, 0.0)
        glRotatef(self.rotation_y, 0.0, 1.0, 0.0)

        # 3D ëª¨ë¸ ë Œë”ë§
        self.render_equipment()

        # ì„¼ì„œ ë°ì´í„° ì‹œê°í™”
        self.render_sensors()

        # ì¢Œí‘œì¶• í‘œì‹œ
        self.render_axes()

    def render_equipment(self):
        """ì¥ë¹„ ëª¨ë¸ ë Œë”ë§"""
        # ì±”ë²„ ë Œë”ë§
        self.render_chamber()

        # ê°€ìŠ¤ ë¼ì¸ ë Œë”ë§
        self.render_gas_lines()

        # ì„¼ì„œ ìœ„ì¹˜ ë Œë”ë§
        self.render_sensor_positions()

    def render_chamber(self):
        """ë°˜ì‘ ì±”ë²„ ë Œë”ë§"""
        glPushMatrix()

        # ì¬ì§ˆ ì†ì„± ì„¤ì •
        material_ambient = [0.2, 0.2, 0.3, 1.0]
        material_diffuse = [0.3, 0.3, 0.5, 1.0]
        material_specular = [0.8, 0.8, 0.8, 1.0]
        material_shininess = [50.0]

        glMaterialfv(GL_FRONT, GL_AMBIENT, material_ambient)
        glMaterialfv(GL_FRONT, GL_DIFFUSE, material_diffuse)
        glMaterialfv(GL_FRONT, GL_SPECULAR, material_specular)
        glMaterialfv(GL_FRONT, GL_SHININESS, material_shininess)

        # ì›í†µí˜• ì±”ë²„ (ì¿¼ë“œë¦­ ì‚¬ìš©)
        from OpenGL.GLU import gluNewQuadric, gluCylinder, gluSphere

        quadric = gluNewQuadric()

        # ì™¸ë²½
        glColor3f(0.7, 0.7, 0.8)
        gluCylinder(quadric, 1.5, 1.5, 2.0, 32, 16)

        # ìƒë‹¨
        glPushMatrix()
        glTranslatef(0.0, 0.0, 2.0)
        gluSphere(quadric, 1.5, 32, 16)
        glPopMatrix()

        # í•˜ë‹¨
        gluSphere(quadric, 1.5, 32, 16)

        glPopMatrix()

    def render_gas_lines(self):
        """ê°€ìŠ¤ ë¼ì¸ ë Œë”ë§"""
        glPushMatrix()

        # ê°€ìŠ¤ ì…êµ¬ íŒŒì´í”„ë“¤
        gas_inlets = [
            (2.0, 0.0, 1.0),   # ê°€ìŠ¤ 1
            (1.4, 1.4, 1.0),   # ê°€ìŠ¤ 2
            (0.0, 2.0, 1.0),   # ê°€ìŠ¤ 3
            (-1.4, 1.4, 1.0),  # ê°€ìŠ¤ 4
        ]

        glColor3f(0.8, 0.8, 0.9)
        for x, y, z in gas_inlets:
            glPushMatrix()
            glTranslatef(x, y, z)

            # íŒŒì´í”„ ë Œë”ë§ (ê°„ë‹¨í•œ ì›í†µ)
            from OpenGL.GLU import gluNewQuadric, gluCylinder
            quadric = gluNewQuadric()
            glRotatef(90, 0, 1, 0)
            gluCylinder(quadric, 0.1, 0.1, 0.5, 8, 4)

            glPopMatrix()

        glPopMatrix()

    def render_sensor_positions(self):
        """ì„¼ì„œ ìœ„ì¹˜ ë Œë”ë§"""
        glPushMatrix()

        # ì˜¨ë„ ì„¼ì„œë“¤
        temp_sensors = [
            ('T1', 1.3, 0.0, 0.5),
            ('T2', 0.0, 1.3, 1.0),
            ('T3', -1.3, 0.0, 1.5),
            ('T4', 0.0, -1.3, 1.0),
        ]

        for sensor_id, x, y, z in temp_sensors:
            glPushMatrix()
            glTranslatef(x, y, z)

            # ì„¼ì„œ ë°ì´í„°ì— ë”°ë¥¸ ìƒ‰ìƒ ê²°ì •
            temp_value = self.sensor_data.get(sensor_id, 25.0)
            color = self.get_temperature_color(temp_value)
            glColor3f(*color)

            # ì„¼ì„œ í‘œì‹œ (ì‘ì€ êµ¬)
            from OpenGL.GLU import gluNewQuadric, gluSphere
            quadric = gluNewQuadric()
            gluSphere(quadric, 0.1, 16, 8)

            glPopMatrix()

        glPopMatrix()

    def render_sensors(self):
        """ì„¼ì„œ ë°ì´í„° ì‹œê°í™”"""
        # ì˜¨ë„ ë¶„í¬ ì‹œê°í™” (ì—´í™”ìƒ íš¨ê³¼)
        self.render_temperature_distribution()

        # ì••ë ¥ ê²Œì´ì§€ 3D í‘œì‹œ
        self.render_pressure_indicators()

    def render_temperature_distribution(self):
        """ì˜¨ë„ ë¶„í¬ ì‹œê°í™”"""
        glPushMatrix()
        glEnable(GL_BLEND)
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)

        # ë°˜íˆ¬ëª… ì˜¨ë„ ì¸µ ë Œë”ë§
        for i in range(10):
            height = i * 0.2
            alpha = 0.1

            # í˜„ì¬ ë†’ì´ì—ì„œì˜ í‰ê·  ì˜¨ë„ ê³„ì‚°
            avg_temp = self.calculate_average_temperature_at_height(height)
            color = self.get_temperature_color(avg_temp)

            glColor4f(color[0], color[1], color[2], alpha)

            # ì›í˜• ì˜¨ë„ ë¶„í¬ ë Œë”ë§
            glBegin(GL_TRIANGLE_FAN)
            glVertex3f(0.0, 0.0, height)

            for angle in range(0, 361, 10):
                rad = math.radians(angle)
                x = 1.4 * math.cos(rad)
                y = 1.4 * math.sin(rad)
                glVertex3f(x, y, height)

            glEnd()

        glDisable(GL_BLEND)
        glPopMatrix()

    def render_pressure_indicators(self):
        """ì••ë ¥ ì¸ë””ì¼€ì´í„° ë Œë”ë§"""
        glPushMatrix()

        # ì••ë ¥ ê°’ì— ë”°ë¥¸ 3D ë°” ê·¸ë˜í”„
        pressure_value = self.sensor_data.get('pressure', 5.0)
        bar_height = pressure_value / 10.0  # ì •ê·œí™”

        glTranslatef(2.5, 0.0, 0.0)
        glColor3f(0.0, 0.8, 1.0)

        # ì••ë ¥ ë°” ë Œë”ë§
        glBegin(GL_QUADS)
        # ì•ë©´
        glVertex3f(-0.1, -0.1, 0.0)
        glVertex3f(0.1, -0.1, 0.0)
        glVertex3f(0.1, 0.1, 0.0)
        glVertex3f(-0.1, 0.1, 0.0)

        # ìœ—ë©´
        glVertex3f(-0.1, -0.1, bar_height)
        glVertex3f(0.1, -0.1, bar_height)
        glVertex3f(0.1, 0.1, bar_height)
        glVertex3f(-0.1, 0.1, bar_height)
        glEnd()

        glPopMatrix()

    def render_axes(self):
        """ì¢Œí‘œì¶• ë Œë”ë§"""
        glPushMatrix()
        glDisable(GL_LIGHTING)

        glLineWidth(3.0)
        glBegin(GL_LINES)

        # Xì¶• (ë¹¨ê°•)
        glColor3f(1.0, 0.0, 0.0)
        glVertex3f(0.0, 0.0, 0.0)
        glVertex3f(1.0, 0.0, 0.0)

        # Yì¶• (ë…¹ìƒ‰)
        glColor3f(0.0, 1.0, 0.0)
        glVertex3f(0.0, 0.0, 0.0)
        glVertex3f(0.0, 1.0, 0.0)

        # Zì¶• (íŒŒë‘)
        glColor3f(0.0, 0.0, 1.0)
        glVertex3f(0.0, 0.0, 0.0)
        glVertex3f(0.0, 0.0, 1.0)

        glEnd()
        glLineWidth(1.0)

        glEnable(GL_LIGHTING)
        glPopMatrix()

    def get_temperature_color(self, temperature):
        """ì˜¨ë„ì— ë”°ë¥¸ ìƒ‰ìƒ ë°˜í™˜"""
        if temperature < 100:
            return self.temperature_color_map['cold']
        elif temperature < 200:
            return self.temperature_color_map['normal']
        elif temperature < 300:
            return self.temperature_color_map['hot']
        else:
            return self.temperature_color_map['critical']

    def calculate_average_temperature_at_height(self, height):
        """íŠ¹ì • ë†’ì´ì—ì„œì˜ í‰ê·  ì˜¨ë„ ê³„ì‚°"""
        # ì‹¤ì œë¡œëŠ” ì„¼ì„œ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë³´ê°„ ê³„ì‚°
        base_temp = 25.0
        height_factor = height * 50  # ë†’ì´ì— ë”°ë¥¸ ì˜¨ë„ ì¦ê°€
        return base_temp + height_factor

    def update_sensor_data(self, sensor_data):
        """ì„¼ì„œ ë°ì´í„° ì—…ë°ì´íŠ¸"""
        self.sensor_data.update(sensor_data)
        self.update()

    def mousePressEvent(self, event):
        """ë§ˆìš°ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸"""
        self.last_mouse_pos = event.position()
        self.mouse_buttons = event.buttons()

    def mouseMoveEvent(self, event):
        """ë§ˆìš°ìŠ¤ ì´ë™ ì´ë²¤íŠ¸"""
        if self.last_mouse_pos is None:
            return

        dx = event.position().x() - self.last_mouse_pos.x()
        dy = event.position().y() - self.last_mouse_pos.y()

        if self.mouse_buttons & Qt.LeftButton:
            # íšŒì „
            self.rotation_y += dx * 0.5
            self.rotation_x += dy * 0.5

            # íšŒì „ ì œí•œ
            self.rotation_x = max(-90, min(90, self.rotation_x))

            self.update()

        self.last_mouse_pos = event.position()

    def wheelEvent(self, event):
        """ë§ˆìš°ìŠ¤ íœ  ì´ë²¤íŠ¸ (ì¤Œ)"""
        delta = event.angleDelta().y()
        zoom_factor = 1.1 if delta > 0 else 0.9

        self.zoom *= zoom_factor
        self.zoom = max(0.1, min(5.0, self.zoom))

        self.update()

    def animate(self):
        """ì• ë‹ˆë©”ì´ì…˜ ì—…ë°ì´íŠ¸"""
        # ì‹œê°„ì— ë”°ë¥¸ ìë™ íšŒì „ (ì˜µì…˜)
        # self.rotation_y += 0.5
        self.update()

    def load_equipment_models(self):
        """ì¥ë¹„ ëª¨ë¸ ë¡œë“œ"""
        # ì‹¤ì œë¡œëŠ” 3D ëª¨ë¸ íŒŒì¼(.obj, .stl ë“±)ì„ ë¡œë“œ
        # ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ í˜•íƒœë¡œ êµ¬í˜„
        pass

---

## 2ï¸âƒ£ ê¸°ì´ˆ ì‹¤ìŠµ (45ë¶„)
### ğŸ› ï¸ **ì»¤ìŠ¤í…€ ìœ„ì ¯ ë° ê³ ê¸‰ UI ì»´í¬ë„ŒíŠ¸ ê°œë°œ**

#### **2.1 í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨ ìœ„ì ¯**

<div class="practice-section">

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
from PySide6.QtWidgets import (QApplication, QWidget, QVBoxLayout, QHBoxLayout,
                               QPushButton, QLabel, QScrollArea, QMainWindow)
from PySide6.QtGui import QPainter, QPen, QBrush, QPolygon, QFont, QColor
from PySide6.QtCore import Qt, QRect, QPoint, Signal, QPropertyAnimation, QEasingCurve
from enum import Enum
import math

class ProcessStage(Enum):
    """í”„ë¡œì„¸ìŠ¤ ë‹¨ê³„"""
    IDLE = "idle"
    PREP = "preparation"
    PROCESS = "processing"
    PURGE = "purging"
    COMPLETE = "complete"
    ERROR = "error"

class FlowComponent:
    """í”Œë¡œìš° ì»´í¬ë„ŒíŠ¸ ê¸°ë³¸ í´ë˜ìŠ¤"""

    def __init__(self, x, y, width, height, component_id, name):
        self.x = x
        self.y = y
        self.width = width
        self.height = height
        self.component_id = component_id
        self.name = name
        self.status = ProcessStage.IDLE
        self.value = 0.0
        self.connections = []  # ì—°ê²°ëœ ì»´í¬ë„ŒíŠ¸ë“¤

    def get_rect(self):
        return QRect(self.x, self.y, self.width, self.height)

    def get_center(self):
        return QPoint(self.x + self.width // 2, self.y + self.height // 2)

    def add_connection(self, target_component):
        if target_component not in self.connections:
            self.connections.append(target_component)

class Chamber(FlowComponent):
    """ë°˜ì‘ ì±”ë²„ ì»´í¬ë„ŒíŠ¸"""

    def __init__(self, x, y, component_id="chamber_1", name="Main Chamber"):
        super().__init__(x, y, 120, 80, component_id, name)
        self.temperature = 25.0
        self.pressure = 1.0

    def draw(self, painter):
        rect = self.get_rect()

        # ìƒíƒœì— ë”°ë¥¸ ìƒ‰ìƒ
        color_map = {
            ProcessStage.IDLE: QColor(200, 200, 200),
            ProcessStage.PREP: QColor(255, 255, 0),
            ProcessStage.PROCESS: QColor(0, 255, 0),
            ProcessStage.PURGE: QColor(255, 165, 0),
            ProcessStage.COMPLETE: QColor(0, 0, 255),
            ProcessStage.ERROR: QColor(255, 0, 0)
        }

        # ì±”ë²„ ì™¸ê³½
        painter.setPen(QPen(Qt.black, 2))
        painter.setBrush(QBrush(color_map[self.status]))
        painter.drawRoundedRect(rect, 10, 10)

        # ë‚´ë¶€ ì› (ë°˜ì‘ ì˜ì—­)
        inner_rect = rect.adjusted(15, 15, -15, -15)
        painter.setBrush(QBrush(Qt.darkBlue))
        painter.drawEllipse(inner_rect)

        # í…ìŠ¤íŠ¸ ì •ë³´
        painter.setPen(QPen(Qt.white))
        painter.setFont(QFont("Arial", 9, QFont.Bold))

        text_rect = QRect(rect.x(), rect.y() - 20, rect.width(), 15)
        painter.drawText(text_rect, Qt.AlignCenter, self.name)

        # ì˜¨ë„/ì••ë ¥ í‘œì‹œ
        painter.setFont(QFont("Arial", 8))
        temp_text = f"T: {self.temperature:.1f}Â°C"
        pressure_text = f"P: {self.pressure:.1f}T"

        painter.drawText(rect.x() + 5, rect.y() + rect.height() + 15, temp_text)
        painter.drawText(rect.x() + 5, rect.y() + rect.height() + 28, pressure_text)

class GasLine(FlowComponent):
    """ê°€ìŠ¤ ë¼ì¸ ì»´í¬ë„ŒíŠ¸"""

    def __init__(self, x, y, component_id="gas_1", name="N2"):
        super().__init__(x, y, 80, 40, component_id, name)
        self.flow_rate = 0.0
        self.valve_open = False

    def draw(self, painter):
        rect = self.get_rect()

        # ë°¸ë¸Œ ìƒíƒœì— ë”°ë¥¸ ìƒ‰ìƒ
        valve_color = QColor(0, 255, 0) if self.valve_open else QColor(255, 0, 0)

        # ê°€ìŠ¤ ë¼ì¸ (ì‚¬ê°í˜•)
        painter.setPen(QPen(Qt.black, 2))
        painter.setBrush(QBrush(QColor(220, 220, 220)))
        painter.drawRect(rect)

        # ë°¸ë¸Œ í‘œì‹œ (ì‘ì€ ì›)
        valve_rect = QRect(rect.x() + rect.width() - 15, rect.y() + 5, 10, 10)
        painter.setBrush(QBrush(valve_color))
        painter.drawEllipse(valve_rect)

        # ê°€ìŠ¤ëª… í‘œì‹œ
        painter.setPen(QPen(Qt.black))
        painter.setFont(QFont("Arial", 10, QFont.Bold))
        painter.drawText(rect, Qt.AlignCenter, self.name)

        # ìœ ëŸ‰ í‘œì‹œ
        painter.setFont(QFont("Arial", 8))
        flow_text = f"{self.flow_rate:.1f} sccm"
        flow_rect = QRect(rect.x(), rect.y() + rect.height() + 5, rect.width(), 15)
        painter.drawText(flow_rect, Qt.AlignCenter, flow_text)

class Pump(FlowComponent):
    """ì§„ê³µ íŒí”„ ì»´í¬ë„ŒíŠ¸"""

    def __init__(self, x, y, component_id="pump_1", name="Turbo Pump"):
        super().__init__(x, y, 60, 60, component_id, name)
        self.pump_speed = 0.0
        self.is_running = False

    def draw(self, painter):
        rect = self.get_rect()
        center = self.get_center()

        # íŒí”„ ìƒíƒœì— ë”°ë¥¸ ìƒ‰ìƒ
        pump_color = QColor(0, 255, 0) if self.is_running else QColor(128, 128, 128)

        # íŒí”„ ëª¸ì²´ (ì›)
        painter.setPen(QPen(Qt.black, 2))
        painter.setBrush(QBrush(pump_color))
        painter.drawEllipse(rect)

        # íšŒì „ ë¸”ë ˆì´ë“œ í‘œì‹œ
        if self.is_running:
            painter.setPen(QPen(Qt.black, 3))
            blade_length = 20

            for i in range(4):
                angle = (i * 90 + self.pump_speed * 10) % 360
                rad = math.radians(angle)

                end_x = center.x() + blade_length * math.cos(rad)
                end_y = center.y() + blade_length * math.sin(rad)

                painter.drawLine(center, QPoint(int(end_x), int(end_y)))

        # ì´ë¦„ í‘œì‹œ
        painter.setPen(QPen(Qt.white))
        painter.setFont(QFont("Arial", 8, QFont.Bold))
        painter.drawText(rect, Qt.AlignCenter, self.name)

class ProcessFlowDiagram(QWidget):
    """í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨ ìœ„ì ¯"""

    component_clicked = Signal(str)
    component_status_changed = Signal(str, ProcessStage)

    def __init__(self, parent=None):
        super().__init__(parent)
        self.setMinimumSize(800, 600)

        # ì»´í¬ë„ŒíŠ¸ë“¤
        self.components = {}
        self.connections = []  # (from_component, to_component, flow_rate)

        # ë§ˆìš°ìŠ¤ ìƒí˜¸ì‘ìš©
        self.selected_component = None
        self.mouse_pos = QPoint()

        # ì• ë‹ˆë©”ì´ì…˜
        self.animation_phase = 0.0
        self.animation_timer = None

        self.setup_components()

    def setup_components(self):
        """ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜ ì„¤ì •"""
        # ê°€ìŠ¤ ë¼ì¸ë“¤ (ìƒë‹¨)
        gas_lines = [
            ("N2", 50, 50),
            ("Ar", 200, 50),
            ("SiH4", 350, 50),
            ("NH3", 500, 50)
        ]

        for name, x, y in gas_lines:
            component = GasLine(x, y, f"gas_{name.lower()}", name)
            self.components[component.component_id] = component

        # ë©”ì¸ ì±”ë²„ (ì¤‘ì•™)
        chamber = Chamber(300, 200, "main_chamber", "CVD Chamber")
        self.components[chamber.component_id] = chamber

        # íŒí”„ë“¤ (í•˜ë‹¨)
        pumps = [
            ("Roughing Pump", 150, 400),
            ("Turbo Pump", 350, 400),
            ("Dry Pump", 550, 400)
        ]

        for name, x, y in pumps:
            pump = Pump(x, y, f"pump_{name.lower().replace(' ', '_')}", name)
            self.components[pump.component_id] = pump

        # ì—°ê²° ì„¤ì •
        self.setup_connections()

    def setup_connections(self):
        """ì»´í¬ë„ŒíŠ¸ ê°„ ì—°ê²° ì„¤ì •"""
        # ê°€ìŠ¤ ë¼ì¸ -> ì±”ë²„
        for comp_id, component in self.components.items():
            if comp_id.startswith("gas_"):
                chamber = self.components["main_chamber"]
                component.add_connection(chamber)
                self.connections.append((component, chamber, 0.0))

        # ì±”ë²„ -> íŒí”„ë“¤
        chamber = self.components["main_chamber"]
        for comp_id, component in self.components.items():
            if comp_id.startswith("pump_"):
                chamber.add_connection(component)
                self.connections.append((chamber, component, 0.0))

    def paintEvent(self, event):
        """í˜ì¸íŒ… ì´ë²¤íŠ¸"""
        painter = QPainter(self)
        painter.setRenderHint(QPainter.Antialiasing)

        # ë°°ê²½
        painter.fillRect(self.rect(), QColor(240, 240, 240))

        # ì—°ê²°ì„  ê·¸ë¦¬ê¸°
        self.draw_connections(painter)

        # ì»´í¬ë„ŒíŠ¸ë“¤ ê·¸ë¦¬ê¸°
        for component in self.components.values():
            component.draw(painter)

        # ì„ íƒëœ ì»´í¬ë„ŒíŠ¸ í•˜ì´ë¼ì´íŠ¸
        if self.selected_component:
            self.highlight_component(painter, self.selected_component)

    def draw_connections(self, painter):
        """ì—°ê²°ì„  ê·¸ë¦¬ê¸°"""
        painter.setPen(QPen(Qt.blue, 3))

        for from_comp, to_comp, flow_rate in self.connections:
            from_center = from_comp.get_center()
            to_center = to_comp.get_center()

            # í™”ì‚´í‘œ ê·¸ë¦¬ê¸°
            self.draw_arrow(painter, from_center, to_center, flow_rate)

    def draw_arrow(self, painter, start, end, flow_rate):
        """í™”ì‚´í‘œ ê·¸ë¦¬ê¸°"""
        # ê¸°ë³¸ ë¼ì¸
        painter.drawLine(start, end)

        # í™”ì‚´í‘œ ë¨¸ë¦¬
        angle = math.atan2(end.y() - start.y(), end.x() - start.x())
        arrow_length = 15
        arrow_angle = math.pi / 6  # 30ë„

        # í™”ì‚´í‘œ ì ë“¤
        arrow_p1 = QPoint(
            int(end.x() - arrow_length * math.cos(angle - arrow_angle)),
            int(end.y() - arrow_length * math.sin(angle - arrow_angle))
        )
        arrow_p2 = QPoint(
            int(end.x() - arrow_length * math.cos(angle + arrow_angle)),
            int(end.y() - arrow_length * math.sin(angle + arrow_angle))
        )

        arrow = QPolygon([end, arrow_p1, arrow_p2])
        painter.setBrush(QBrush(Qt.blue))
        painter.drawPolygon(arrow)

        # ìœ ëŸ‰ í‘œì‹œ
        if flow_rate > 0:
            mid_point = QPoint((start.x() + end.x()) // 2, (start.y() + end.y()) // 2)
            painter.setPen(QPen(Qt.red))
            painter.setFont(QFont("Arial", 8))
            painter.drawText(mid_point, f"{flow_rate:.1f}")

    def highlight_component(self, painter, component):
        """ì„ íƒëœ ì»´í¬ë„ŒíŠ¸ í•˜ì´ë¼ì´íŠ¸"""
        rect = component.get_rect()
        painter.setPen(QPen(Qt.red, 3, Qt.DashLine))
        painter.setBrush(QBrush())  # íˆ¬ëª…
        painter.drawRect(rect.adjusted(-5, -5, 5, 5))

    def mousePressEvent(self, event):
        """ë§ˆìš°ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸"""
        click_pos = event.position().toPoint()

        # í´ë¦­ëœ ì»´í¬ë„ŒíŠ¸ ì°¾ê¸°
        for component in self.components.values():
            if component.get_rect().contains(click_pos):
                self.selected_component = component
                self.component_clicked.emit(component.component_id)
                self.update()
                break
        else:
            self.selected_component = None
            self.update()

    def update_component_status(self, component_id, status, **kwargs):
        """ì»´í¬ë„ŒíŠ¸ ìƒíƒœ ì—…ë°ì´íŠ¸"""
        if component_id in self.components:
            component = self.components[component_id]
            component.status = status

            # ì¶”ê°€ ì†ì„± ì—…ë°ì´íŠ¸
            for key, value in kwargs.items():
                if hasattr(component, key):
                    setattr(component, key, value)

            self.component_status_changed.emit(component_id, status)
            self.update()

    def start_simulation(self):
        """ì‹œë®¬ë ˆì´ì…˜ ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘"""
        if not self.animation_timer:
            from PySide6.QtCore import QTimer
            self.animation_timer = QTimer()
            self.animation_timer.timeout.connect(self.animate_flow)
            self.animation_timer.start(100)  # 100ms ê°„ê²©

    def stop_simulation(self):
        """ì‹œë®¬ë ˆì´ì…˜ ì• ë‹ˆë©”ì´ì…˜ ì¤‘ì§€"""
        if self.animation_timer:
            self.animation_timer.stop()

    def animate_flow(self):
        """í”Œë¡œìš° ì• ë‹ˆë©”ì´ì…˜"""
        self.animation_phase += 0.1

        # íŒí”„ íšŒì „ ì• ë‹ˆë©”ì´ì…˜
        for component in self.components.values():
            if isinstance(component, Pump) and component.is_running:
                component.pump_speed = self.animation_phase

        self.update()

class ProcessControlPanel(QWidget):
    """í”„ë¡œì„¸ìŠ¤ ì œì–´ íŒ¨ë„"""

    def __init__(self, flow_diagram, parent=None):
        super().__init__(parent)
        self.flow_diagram = flow_diagram
        self.setup_ui()
        self.setup_connections()

    def setup_ui(self):
        """UI ì„¤ì •"""
        layout = QVBoxLayout(self)

        # ì œì–´ ë²„íŠ¼ë“¤
        control_layout = QHBoxLayout()

        self.start_button = QPushButton("í”„ë¡œì„¸ìŠ¤ ì‹œì‘")
        self.stop_button = QPushButton("í”„ë¡œì„¸ìŠ¤ ì¤‘ì§€")
        self.emergency_button = QPushButton("ë¹„ìƒ ì •ì§€")
        self.emergency_button.setStyleSheet("background-color: red; color: white;")

        control_layout.addWidget(self.start_button)
        control_layout.addWidget(self.stop_button)
        control_layout.addWidget(self.emergency_button)

        layout.addLayout(control_layout)

        # ìƒíƒœ ì •ë³´
        self.status_label = QLabel("ì‹œìŠ¤í…œ ëŒ€ê¸° ì¤‘")
        self.status_label.setFont(QFont("Arial", 12, QFont.Bold))
        layout.addWidget(self.status_label)

        # ê°œë³„ ì»´í¬ë„ŒíŠ¸ ì œì–´
        component_layout = QHBoxLayout()

        # ê°€ìŠ¤ ë°¸ë¸Œ ì œì–´
        gas_control = QVBoxLayout()
        gas_control.addWidget(QLabel("ê°€ìŠ¤ ì œì–´"))

        self.gas_buttons = {}
        for gas_name in ["N2", "Ar", "SiH4", "NH3"]:
            button = QPushButton(f"{gas_name} ON/OFF")
            button.setCheckable(True)
            self.gas_buttons[gas_name] = button
            gas_control.addWidget(button)

        component_layout.addLayout(gas_control)

        # íŒí”„ ì œì–´
        pump_control = QVBoxLayout()
        pump_control.addWidget(QLabel("íŒí”„ ì œì–´"))

        self.pump_buttons = {}
        for pump_name in ["Roughing Pump", "Turbo Pump", "Dry Pump"]:
            button = QPushButton(f"{pump_name} ON/OFF")
            button.setCheckable(True)
            self.pump_buttons[pump_name] = button
            pump_control.addWidget(button)

        component_layout.addLayout(pump_control)

        layout.addLayout(component_layout)

    def setup_connections(self):
        """ì‹œê·¸ë„ ì—°ê²°"""
        self.start_button.clicked.connect(self.start_process)
        self.stop_button.clicked.connect(self.stop_process)
        self.emergency_button.clicked.connect(self.emergency_stop)

        # ê°€ìŠ¤ ë°¸ë¸Œ ì œì–´
        for gas_name, button in self.gas_buttons.items():
            button.toggled.connect(lambda checked, name=gas_name: self.toggle_gas(name, checked))

        # íŒí”„ ì œì–´
        for pump_name, button in self.pump_buttons.items():
            button.toggled.connect(lambda checked, name=pump_name: self.toggle_pump(name, checked))

        # í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨ ì—°ê²°
        self.flow_diagram.component_clicked.connect(self.on_component_clicked)

    def start_process(self):
        """í”„ë¡œì„¸ìŠ¤ ì‹œì‘"""
        self.status_label.setText("í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ì¤‘")
        self.flow_diagram.start_simulation()

        # ì±”ë²„ ìƒíƒœ ë³€ê²½
        self.flow_diagram.update_component_status(
            "main_chamber",
            ProcessStage.PROCESS,
            temperature=350.0,
            pressure=5.0
        )

    def stop_process(self):
        """í”„ë¡œì„¸ìŠ¤ ì¤‘ì§€"""
        self.status_label.setText("í”„ë¡œì„¸ìŠ¤ ì¤‘ì§€ë¨")
        self.flow_diagram.stop_simulation()

        # ëª¨ë“  ì»´í¬ë„ŒíŠ¸ idle ìƒíƒœë¡œ
        for comp_id in self.flow_diagram.components:
            self.flow_diagram.update_component_status(comp_id, ProcessStage.IDLE)

    def emergency_stop(self):
        """ë¹„ìƒ ì •ì§€"""
        self.status_label.setText("ë¹„ìƒ ì •ì§€ - ì•ˆì „ ì ê²€ í•„ìš”")
        self.flow_diagram.stop_simulation()

        # ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ì—ëŸ¬ ìƒíƒœë¡œ
        for comp_id in self.flow_diagram.components:
            self.flow_diagram.update_component_status(comp_id, ProcessStage.ERROR)

    def toggle_gas(self, gas_name, checked):
        """ê°€ìŠ¤ ë°¸ë¸Œ í† ê¸€"""
        component_id = f"gas_{gas_name.lower()}"
        if component_id in self.flow_diagram.components:
            self.flow_diagram.update_component_status(
                component_id,
                ProcessStage.PROCESS if checked else ProcessStage.IDLE,
                valve_open=checked,
                flow_rate=100.0 if checked else 0.0
            )

    def toggle_pump(self, pump_name, checked):
        """íŒí”„ í† ê¸€"""
        component_id = f"pump_{pump_name.lower().replace(' ', '_')}"
        if component_id in self.flow_diagram.components:
            self.flow_diagram.update_component_status(
                component_id,
                ProcessStage.PROCESS if checked else ProcessStage.IDLE,
                is_running=checked,
                pump_speed=1000.0 if checked else 0.0
            )

    def on_component_clicked(self, component_id):
        """ì»´í¬ë„ŒíŠ¸ í´ë¦­ ì²˜ë¦¬"""
        component = self.flow_diagram.components.get(component_id)
        if component:
            self.status_label.setText(f"ì„ íƒë¨: {component.name} ({component_id})")

# ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
class ProcessMonitorApp(QMainWindow):
    """í”„ë¡œì„¸ìŠ¤ ëª¨ë‹ˆí„°ë§ ì• í”Œë¦¬ì¼€ì´ì…˜"""

    def __init__(self):
        super().__init__()
        self.setWindowTitle("ë°˜ë„ì²´ í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš° ëª¨ë‹ˆí„°ë§")
        self.setGeometry(100, 100, 1200, 800)

        # ì¤‘ì•™ ìœ„ì ¯
        central_widget = QWidget()
        self.setCentralWidget(central_widget)

        # ë ˆì´ì•„ì›ƒ
        layout = QHBoxLayout(central_widget)

        # í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨
        self.flow_diagram = ProcessFlowDiagram()
        scroll_area = QScrollArea()
        scroll_area.setWidget(self.flow_diagram)
        scroll_area.setWidgetResizable(True)

        # ì œì–´ íŒ¨ë„
        self.control_panel = ProcessControlPanel(self.flow_diagram)
        self.control_panel.setMaximumWidth(300)

        layout.addWidget(scroll_area, 3)
        layout.addWidget(self.control_panel, 1)

# ë©”ì¸ ì‹¤í–‰
if __name__ == "__main__":
    app = QApplication(sys.argv)

    window = ProcessMonitorApp()
    window.show()

    sys.exit(app.exec())
```

</div>

#### **2.2 ê³ ê¸‰ ì°¨íŠ¸ ìœ„ì ¯**

##### **2.2.1 ì‹¤ì‹œê°„ íŠ¸ë Œë“œ ì°¨íŠ¸**

<div class="chart-widget">

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
import math
import time
from datetime import datetime, timedelta
from collections import deque
from PySide6.QtWidgets import QWidget, QVBoxLayout, QHBoxLayout, QLabel, QPushButton
from PySide6.QtGui import QPainter, QPen, QBrush, QFont, QColor, QLinearGradient
from PySide6.QtCore import Qt, QRect, QPoint, QTimer, Signal
import random

class AdvancedTrendChart(QWidget):
    """ê³ ê¸‰ íŠ¸ë Œë“œ ì°¨íŠ¸ ìœ„ì ¯"""

    point_hovered = Signal(str, float, datetime)
    threshold_exceeded = Signal(str, float, float)

    def __init__(self, title="Trend Chart", parent=None):
        super().__init__(parent)
        self.setMinimumSize(600, 400)

        # ì°¨íŠ¸ ì†ì„±
        self.title = title
        self.data_series = {}  # {series_name: {'data': deque, 'color': QColor, 'visible': bool}}
        self.time_range = timedelta(minutes=10)  # 10ë¶„ ë²”ìœ„
        self.max_points = 1000

        # ì¶• ì„¤ì •
        self.y_min = 0
        self.y_max = 100
        self.auto_scale = True
        self.grid_enabled = True

        # ì„ê³„ê°’ ì„¤ì •
        self.thresholds = {}  # {series_name: {'warning': float, 'critical': float}}

        # ë§ˆìš°ìŠ¤ ìƒí˜¸ì‘ìš©
        self.mouse_pos = QPoint()
        self.show_crosshair = True
        self.show_values = True

        # í™•ëŒ€/ì¶•ì†Œ
        self.zoom_factor = 1.0
        self.pan_offset = QPoint(0, 0)

        # ìƒ‰ìƒ íŒ”ë ˆíŠ¸
        self.default_colors = [
            QColor(255, 0, 0),    # ë¹¨ê°•
            QColor(0, 255, 0),    # ë…¹ìƒ‰
            QColor(0, 0, 255),    # íŒŒë‘
            QColor(255, 165, 0),  # ì£¼í™©
            QColor(128, 0, 128),  # ë³´ë¼
            QColor(255, 192, 203), # ë¶„í™
            QColor(0, 255, 255),  # ì‹œì•ˆ
            QColor(255, 255, 0),  # ë…¸ë‘
        ]
        self.color_index = 0

    def add_series(self, series_name, color=None, warning_threshold=None, critical_threshold=None):
        """ë°ì´í„° ì‹œë¦¬ì¦ˆ ì¶”ê°€"""
        if color is None:
            color = self.default_colors[self.color_index % len(self.default_colors)]
            self.color_index += 1

        self.data_series[series_name] = {
            'data': deque(maxlen=self.max_points),
            'color': color,
            'visible': True
        }

        if warning_threshold is not None or critical_threshold is not None:
            self.thresholds[series_name] = {
                'warning': warning_threshold,
                'critical': critical_threshold
            }

    def add_data_point(self, series_name, value, timestamp=None):
        """ë°ì´í„° í¬ì¸íŠ¸ ì¶”ê°€"""
        if series_name not in self.data_series:
            self.add_series(series_name)

        if timestamp is None:
            timestamp = datetime.now()

        # ë°ì´í„° ì¶”ê°€
        self.data_series[series_name]['data'].append((timestamp, value))

        # ìë™ ìŠ¤ì¼€ì¼ë§
        if self.auto_scale:
            self.update_y_range()

        # ì„ê³„ê°’ ì²´í¬
        self.check_thresholds(series_name, value)

        self.update()

    def update_y_range(self):
        """Yì¶• ë²”ìœ„ ìë™ ì—…ë°ì´íŠ¸"""
        all_values = []

        for series_data in self.data_series.values():
            for timestamp, value in series_data['data']:
                all_values.append(value)

        if all_values:
            min_val = min(all_values)
            max_val = max(all_values)

            # ì—¬ë°± ì¶”ê°€ (10%)
            margin = (max_val - min_val) * 0.1
            self.y_min = min_val - margin
            self.y_max = max_val + margin

    def check_thresholds(self, series_name, value):
        """ì„ê³„ê°’ ì²´í¬"""
        if series_name in self.thresholds:
            thresholds = self.thresholds[series_name]

            if thresholds.get('critical') and value > thresholds['critical']:
                self.threshold_exceeded.emit(series_name, value, thresholds['critical'])
            elif thresholds.get('warning') and value > thresholds['warning']:
                self.threshold_exceeded.emit(series_name, value, thresholds['warning'])

    def paintEvent(self, event):
        """í˜ì¸íŒ… ì´ë²¤íŠ¸"""
        painter = QPainter(self)
        painter.setRenderHint(QPainter.Antialiasing)

        # ë°°ê²½
        self.draw_background(painter)

        # ì°¨íŠ¸ ì˜ì—­ ê³„ì‚°
        chart_rect = self.get_chart_rect()

        # ê·¸ë¦¬ë“œ
        if self.grid_enabled:
            self.draw_grid(painter, chart_rect)

        # ì„ê³„ê°’ ë¼ì¸
        self.draw_threshold_lines(painter, chart_rect)

        # ë°ì´í„° ì‹œë¦¬ì¦ˆ
        self.draw_data_series(painter, chart_rect)

        # ì¶• ë¼ë²¨
        self.draw_axes(painter, chart_rect)

        # ì œëª©
        self.draw_title(painter)

        # ë²”ë¡€
        self.draw_legend(painter)

        # í¬ë¡œìŠ¤í—¤ì–´
        if self.show_crosshair:
            self.draw_crosshair(painter, chart_rect)

    def draw_background(self, painter):
        """ë°°ê²½ ê·¸ë¦¬ê¸°"""
        # ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½
        gradient = QLinearGradient(0, 0, 0, self.height())
        gradient.setColorAt(0.0, QColor(250, 250, 250))
        gradient.setColorAt(1.0, QColor(220, 220, 220))

        painter.fillRect(self.rect(), QBrush(gradient))

    def get_chart_rect(self):
        """ì°¨íŠ¸ ì˜ì—­ ê³„ì‚°"""
        margin = 60
        return QRect(
            margin,
            margin + 30,  # ì œëª© ê³µê°„
            self.width() - 2 * margin - 150,  # ë²”ë¡€ ê³µê°„
            self.height() - 2 * margin - 30
        )

    def draw_grid(self, painter, chart_rect):
        """ê·¸ë¦¬ë“œ ê·¸ë¦¬ê¸°"""
        painter.setPen(QPen(QColor(200, 200, 200), 1, Qt.DotLine))

        # ìˆ˜ì§ì„  (ì‹œê°„ì¶•)
        for i in range(10):
            x = chart_rect.x() + (i * chart_rect.width() / 9)
            painter.drawLine(x, chart_rect.y(), x, chart_rect.bottom())

        # ìˆ˜í‰ì„  (ê°’ì¶•)
        for i in range(6):
            y = chart_rect.y() + (i * chart_rect.height() / 5)
            painter.drawLine(chart_rect.x(), y, chart_rect.right(), y)

    def draw_threshold_lines(self, painter, chart_rect):
        """ì„ê³„ê°’ ë¼ì¸ ê·¸ë¦¬ê¸°"""
        for series_name, thresholds in self.thresholds.items():
            # ê²½ê³  ì„ê³„ê°’
            if thresholds.get('warning'):
                y = self.value_to_y(thresholds['warning'], chart_rect)
                painter.setPen(QPen(QColor(255, 165, 0), 2, Qt.DashLine))
                painter.drawLine(chart_rect.x(), y, chart_rect.right(), y)

                # ë¼ë²¨
                painter.setPen(QPen(QColor(255, 165, 0)))
                painter.drawText(chart_rect.right() + 5, y, f"Warning: {thresholds['warning']}")

            # ìœ„í—˜ ì„ê³„ê°’
            if thresholds.get('critical'):
                y = self.value_to_y(thresholds['critical'], chart_rect)
                painter.setPen(QPen(QColor(255, 0, 0), 2, Qt.DashLine))
                painter.drawLine(chart_rect.x(), y, chart_rect.right(), y)

                # ë¼ë²¨
                painter.setPen(QPen(QColor(255, 0, 0)))
                painter.drawText(chart_rect.right() + 5, y, f"Critical: {thresholds['critical']}")

    def draw_data_series(self, painter, chart_rect):
        """ë°ì´í„° ì‹œë¦¬ì¦ˆ ê·¸ë¦¬ê¸°"""
        current_time = datetime.now()
        time_start = current_time - self.time_range

        for series_name, series_data in self.data_series.items():
            if not series_data['visible'] or not series_data['data']:
                continue

            # ì‹œê°„ ë²”ìœ„ ë‚´ ë°ì´í„° í•„í„°ë§
            filtered_data = [
                (timestamp, value) for timestamp, value in series_data['data']
                if timestamp >= time_start
            ]

            if len(filtered_data) < 2:
                continue

            # ë¼ì¸ ê·¸ë¦¬ê¸°
            painter.setPen(QPen(series_data['color'], 2))

            points = []
            for timestamp, value in filtered_data:
                x = self.timestamp_to_x(timestamp, chart_rect, current_time)
                y = self.value_to_y(value, chart_rect)
                points.append(QPoint(int(x), int(y)))

            # ì—°ê²°ëœ ë¼ì¸ ê·¸ë¦¬ê¸°
            for i in range(len(points) - 1):
                painter.drawLine(points[i], points[i + 1])

            # ë°ì´í„° í¬ì¸íŠ¸ ë§ˆì»¤
            painter.setBrush(QBrush(series_data['color']))
            for point in points[-10:]:  # ìµœê·¼ 10ê°œë§Œ í‘œì‹œ
                painter.drawEllipse(point, 3, 3)

    def timestamp_to_x(self, timestamp, chart_rect, current_time):
        """íƒ€ì„ìŠ¤íƒ¬í”„ë¥¼ X ì¢Œí‘œë¡œ ë³€í™˜"""
        time_diff = (current_time - timestamp).total_seconds()
        time_range_seconds = self.time_range.total_seconds()

        ratio = 1.0 - (time_diff / time_range_seconds)
        return chart_rect.x() + ratio * chart_rect.width()

    def value_to_y(self, value, chart_rect):
        """ê°’ì„ Y ì¢Œí‘œë¡œ ë³€í™˜"""
        if self.y_max == self.y_min:
            return chart_rect.center().y()

        ratio = (value - self.y_min) / (self.y_max - self.y_min)
        return chart_rect.bottom() - ratio * chart_rect.height()

    def draw_axes(self, painter, chart_rect):
        """ì¶• ë¼ë²¨ ê·¸ë¦¬ê¸°"""
        painter.setPen(QPen(Qt.black))
        painter.setFont(QFont("Arial", 9))

        # Yì¶• ë¼ë²¨
        for i in range(6):
            y = chart_rect.y() + (i * chart_rect.height() / 5)
            value = self.y_max - (i * (self.y_max - self.y_min) / 5)
            text = f"{value:.1f}"
            painter.drawText(chart_rect.x() - 30, y + 5, text)

        # Xì¶• ë¼ë²¨ (ì‹œê°„)
        current_time = datetime.now()
        for i in range(6):
            x = chart_rect.x() + (i * chart_rect.width() / 5)
            time_offset = timedelta(seconds=(5-i) * self.time_range.total_seconds() / 5)
            timestamp = current_time - time_offset
            text = timestamp.strftime("%H:%M")
            painter.drawText(x - 20, chart_rect.bottom() + 20, text)

    def draw_title(self, painter):
        """ì œëª© ê·¸ë¦¬ê¸°"""
        painter.setPen(QPen(Qt.black))
        painter.setFont(QFont("Arial", 14, QFont.Bold))
        title_rect = QRect(0, 10, self.width(), 30)
        painter.drawText(title_rect, Qt.AlignCenter, self.title)

    def draw_legend(self, painter):
        """ë²”ë¡€ ê·¸ë¦¬ê¸°"""
        legend_x = self.width() - 140
        legend_y = 60

        painter.setPen(QPen(Qt.black))
        painter.setFont(QFont("Arial", 9))

        y_offset = 0
        for series_name, series_data in self.data_series.items():
            if not series_data['visible']:
                continue

            # ìƒ‰ìƒ ë°•ìŠ¤
            color_rect = QRect(legend_x, legend_y + y_offset, 15, 15)
            painter.fillRect(color_rect, series_data['color'])
            painter.drawRect(color_rect)

            # ì‹œë¦¬ì¦ˆ ì´ë¦„
            painter.drawText(legend_x + 20, legend_y + y_offset + 12, series_name)

            # í˜„ì¬ ê°’
            if series_data['data']:
                current_value = series_data['data'][-1][1]
                painter.drawText(legend_x + 20, legend_y + y_offset + 25, f"{current_value:.2f}")

            y_offset += 40

    def draw_crosshair(self, painter, chart_rect):
        """í¬ë¡œìŠ¤í—¤ì–´ ê·¸ë¦¬ê¸°"""
        if not chart_rect.contains(self.mouse_pos):
            return

        painter.setPen(QPen(QColor(100, 100, 100), 1, Qt.DashLine))

        # ìˆ˜ì§ì„ 
        painter.drawLine(self.mouse_pos.x(), chart_rect.y(),
                        self.mouse_pos.x(), chart_rect.bottom())

        # ìˆ˜í‰ì„ 
        painter.drawLine(chart_rect.x(), self.mouse_pos.y(),
                        chart_rect.right(), self.mouse_pos.y())

        # ê°’ í‘œì‹œ
        if self.show_values:
            value = self.y_to_value(self.mouse_pos.y(), chart_rect)
            painter.setPen(QPen(Qt.black))
            painter.drawText(self.mouse_pos.x() + 10, self.mouse_pos.y() - 10,
                           f"Value: {value:.2f}")

    def y_to_value(self, y, chart_rect):
        """Y ì¢Œí‘œë¥¼ ê°’ìœ¼ë¡œ ë³€í™˜"""
        if chart_rect.height() == 0:
            return 0

        ratio = (chart_rect.bottom() - y) / chart_rect.height()
        return self.y_min + ratio * (self.y_max - self.y_min)

    def mouseMoveEvent(self, event):
        """ë§ˆìš°ìŠ¤ ì´ë™ ì´ë²¤íŠ¸"""
        self.mouse_pos = event.position().toPoint()
        self.update()

    def wheelEvent(self, event):
        """ë§ˆìš°ìŠ¤ íœ  ì´ë²¤íŠ¸ (ì¤Œ)"""
        delta = event.angleDelta().y()
        zoom_in = delta > 0

        if zoom_in:
            self.zoom_factor *= 1.1
        else:
            self.zoom_factor /= 1.1

        self.zoom_factor = max(0.1, min(10.0, self.zoom_factor))
        self.update()

    def set_time_range(self, minutes):
        """ì‹œê°„ ë²”ìœ„ ì„¤ì •"""
        self.time_range = timedelta(minutes=minutes)
        self.update()

    def set_y_range(self, y_min, y_max):
        """Yì¶• ë²”ìœ„ ì„¤ì •"""
        self.y_min = y_min
        self.y_max = y_max
        self.auto_scale = False
        self.update()

    def toggle_series_visibility(self, series_name):
        """ì‹œë¦¬ì¦ˆ í‘œì‹œ/ìˆ¨ê¹€ í† ê¸€"""
        if series_name in self.data_series:
            self.data_series[series_name]['visible'] = not self.data_series[series_name]['visible']
            self.update()

    def clear_data(self):
        """ëª¨ë“  ë°ì´í„° í´ë¦¬ì–´"""
        for series_data in self.data_series.values():
            series_data['data'].clear()
        self.update()

    def export_data(self):
        """ë°ì´í„° ë‚´ë³´ë‚´ê¸°"""
        data = {}
        for series_name, series_data in self.data_series.items():
            data[series_name] = list(series_data['data'])
        return data
```

</div>

---

## 3ï¸âƒ£ ì‹¬í™” ì‹¤ìŠµ (45ë¶„)
### âš¡ **3D ì‹œê°í™” ë° í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜**

#### **3.1 ê³ ê¸‰ 3D ì‹œê°í™” êµ¬í˜„**

##### **3.1.1 ì¸í„°ë™í‹°ë¸Œ 3D ì¥ë¹„ ëª¨ë¸**

<div class="advanced-3d">

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
import math
import numpy as np
from PySide6.QtOpenGLWidgets import QOpenGLWidget
from PySide6.QtWidgets import QApplication, QMainWindow, QVBoxLayout, QHBoxLayout, QWidget, QSlider, QLabel, QPushButton
from PySide6.QtCore import Qt, QTimer, Signal, QPoint
from PySide6.QtGui import QMatrix4x4, QVector3D, QQuaternion
from OpenGL.GL import *
from OpenGL.GLU import *
import random

class Interactive3DEquipment(QOpenGLWidget):
    """ì¸í„°ë™í‹°ë¸Œ 3D ì¥ë¹„ ì‹œê°í™”"""

    component_selected = Signal(str)
    sensor_data_updated = Signal(str, float)

    def __init__(self, parent=None):
        super().__init__(parent)

        # ì¹´ë©”ë¼ ì œì–´
        self.camera_distance = 10.0
        self.camera_rotation_x = 15.0
        self.camera_rotation_y = 45.0

        # ë§ˆìš°ìŠ¤ ìƒí˜¸ì‘ìš©
        self.last_mouse_pos = None
        self.mouse_sensitivity = 0.5

        # 3D ëª¨ë¸ êµ¬ì„±ìš”ì†Œ
        self.equipment_components = {
            'chamber': {
                'position': [0.0, 0.0, 0.0],
                'rotation': [0.0, 0.0, 0.0],
                'scale': [1.0, 1.0, 1.0],
                'color': [0.7, 0.7, 0.8, 1.0],
                'selected': False,
                'temperature': 25.0
            },
            'gas_inlet_1': {
                'position': [2.0, 0.0, 1.0],
                'rotation': [0.0, 0.0, 90.0],
                'scale': [0.3, 0.3, 1.0],
                'color': [0.2, 0.8, 0.2, 1.0],
                'selected': False,
                'flow_rate': 0.0
            },
            'gas_inlet_2': {
                'position': [0.0, 2.0, 1.0],
                'rotation': [0.0, 0.0, 0.0],
                'scale': [0.3, 0.3, 1.0],
                'color': [0.2, 0.2, 0.8, 1.0],
                'selected': False,
                'flow_rate': 0.0
            },
            'exhaust_port': {
                'position': [0.0, 0.0, -2.0],
                'rotation': [0.0, 0.0, 0.0],
                'scale': [0.5, 0.5, 0.8],
                'color': [0.8, 0.2, 0.2, 1.0],
                'selected': False,
                'pressure': 1.0
            },
            'heater': {
                'position': [0.0, 0.0, 2.5],
                'rotation': [0.0, 0.0, 0.0],
                'scale': [1.2, 1.2, 0.2],
                'color': [1.0, 0.5, 0.0, 1.0],
                'selected': False,
                'power': 0.0
            }
        }

        # ì• ë‹ˆë©”ì´ì…˜
        self.animation_timer = QTimer()
        self.animation_timer.timeout.connect(self.animate)
        self.animation_timer.start(33)  # 30 FPS

        # íŒŒí‹°í´ ì‹œìŠ¤í…œ (ê°€ìŠ¤ í”Œë¡œìš° ì‹œê°í™”)
        self.particles = []
        self.max_particles = 200

        # ì„¼ì„œ ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
        self.sensor_timer = QTimer()
        self.sensor_timer.timeout.connect(self.update_sensor_data)
        self.sensor_timer.start(1000)  # 1ì´ˆë§ˆë‹¤ ì„¼ì„œ ë°ì´í„° ì—…ë°ì´íŠ¸

    def initializeGL(self):
        """OpenGL ì´ˆê¸°í™”"""
        # ê¹Šì´ í…ŒìŠ¤íŠ¸
        glEnable(GL_DEPTH_TEST)
        glDepthFunc(GL_LESS)

        # ì¡°ëª… ì„¤ì •
        glEnable(GL_LIGHTING)
        glEnable(GL_LIGHT0)
        glEnable(GL_LIGHT1)

        # ë©”ì¸ ì¡°ëª…
        light0_pos = [5.0, 5.0, 5.0, 1.0]
        light0_ambient = [0.3, 0.3, 0.3, 1.0]
        light0_diffuse = [0.8, 0.8, 0.8, 1.0]
        light0_specular = [1.0, 1.0, 1.0, 1.0]

        glLightfv(GL_LIGHT0, GL_POSITION, light0_pos)
        glLightfv(GL_LIGHT0, GL_AMBIENT, light0_ambient)
        glLightfv(GL_LIGHT0, GL_DIFFUSE, light0_diffuse)
        glLightfv(GL_LIGHT0, GL_SPECULAR, light0_specular)

        # ë³´ì¡° ì¡°ëª…
        light1_pos = [-3.0, -3.0, 3.0, 1.0]
        light1_ambient = [0.1, 0.1, 0.1, 1.0]
        light1_diffuse = [0.4, 0.4, 0.4, 1.0]

        glLightfv(GL_LIGHT1, GL_POSITION, light1_pos)
        glLightfv(GL_LIGHT1, GL_AMBIENT, light1_ambient)
        glLightfv(GL_LIGHT1, GL_DIFFUSE, light1_diffuse)

        # ë¸”ë Œë”© (íˆ¬ëª…ë„)
        glEnable(GL_BLEND)
        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)

        # ë°°ê²½ìƒ‰
        glClearColor(0.05, 0.05, 0.1, 1.0)

    def resizeGL(self, width, height):
        """ë·°í¬íŠ¸ í¬ê¸° ë³€ê²½"""
        glViewport(0, 0, width, height)
        glMatrixMode(GL_PROJECTION)
        glLoadIdentity()

        aspect_ratio = width / height if height != 0 else 1.0
        gluPerspective(45.0, aspect_ratio, 0.1, 100.0)

    def paintGL(self):
        """3D ë Œë”ë§"""
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT)

        glMatrixMode(GL_MODELVIEW)
        glLoadIdentity()

        # ì¹´ë©”ë¼ ì„¤ì •
        glTranslatef(0.0, 0.0, -self.camera_distance)
        glRotatef(self.camera_rotation_x, 1.0, 0.0, 0.0)
        glRotatef(self.camera_rotation_y, 0.0, 1.0, 0.0)

        # ì¢Œí‘œì¶• ë Œë”ë§
        self.render_axes()

        # ì¥ë¹„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§
        self.render_equipment_components()

        # íŒŒí‹°í´ ì‹œìŠ¤í…œ ë Œë”ë§ (ê°€ìŠ¤ í”Œë¡œìš°)
        self.render_particles()

        # ì„¼ì„œ ë°ì´í„° ì‹œê°í™”
        self.render_sensor_overlays()

    def render_axes(self):
        """ì¢Œí‘œì¶• ë Œë”ë§"""
        glDisable(GL_LIGHTING)
        glLineWidth(3.0)

        glBegin(GL_LINES)
        # Xì¶• (ë¹¨ê°•)
        glColor3f(1.0, 0.0, 0.0)
        glVertex3f(0.0, 0.0, 0.0)
        glVertex3f(2.0, 0.0, 0.0)

        # Yì¶• (ë…¹ìƒ‰)
        glColor3f(0.0, 1.0, 0.0)
        glVertex3f(0.0, 0.0, 0.0)
        glVertex3f(0.0, 2.0, 0.0)

        # Zì¶• (íŒŒë‘)
        glColor3f(0.0, 0.0, 1.0)
        glVertex3f(0.0, 0.0, 0.0)
        glVertex3f(0.0, 0.0, 2.0)
        glEnd()

        glLineWidth(1.0)
        glEnable(GL_LIGHTING)

    def render_equipment_components(self):
        """ì¥ë¹„ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§"""
        for comp_name, comp_data in self.equipment_components.items():
            glPushMatrix()

            # ë³€í™˜ ì ìš©
            pos = comp_data['position']
            rot = comp_data['rotation']
            scale = comp_data['scale']

            glTranslatef(pos[0], pos[1], pos[2])
            glRotatef(rot[0], 1.0, 0.0, 0.0)
            glRotatef(rot[1], 0.0, 1.0, 0.0)
            glRotatef(rot[2], 0.0, 0.0, 1.0)
            glScalef(scale[0], scale[1], scale[2])

            # ì¬ì§ˆ ì„¤ì •
            self.set_material(comp_data)

            # ì»´í¬ë„ŒíŠ¸ë³„ ë Œë”ë§
            if comp_name == 'chamber':
                self.render_chamber(comp_data)
            elif comp_name.startswith('gas_inlet'):
                self.render_gas_inlet(comp_data)
            elif comp_name == 'exhaust_port':
                self.render_exhaust_port(comp_data)
            elif comp_name == 'heater':
                self.render_heater(comp_data)

            glPopMatrix()

    def set_material(self, comp_data):
        """ì¬ì§ˆ ì†ì„± ì„¤ì •"""
        color = comp_data['color']
        selected = comp_data['selected']

        # ì„ íƒëœ ì»´í¬ë„ŒíŠ¸ëŠ” ë°ê²Œ í‘œì‹œ
        if selected:
            ambient = [color[0] * 0.5, color[1] * 0.5, color[2] * 0.5, color[3]]
            diffuse = [min(1.0, color[0] * 1.5), min(1.0, color[1] * 1.5),
                      min(1.0, color[2] * 1.5), color[3]]
        else:
            ambient = [color[0] * 0.3, color[1] * 0.3, color[2] * 0.3, color[3]]
            diffuse = color

        specular = [0.8, 0.8, 0.8, 1.0]
        shininess = [50.0]

        glMaterialfv(GL_FRONT, GL_AMBIENT, ambient)
        glMaterialfv(GL_FRONT, GL_DIFFUSE, diffuse)
        glMaterialfv(GL_FRONT, GL_SPECULAR, specular)
        glMaterialfv(GL_FRONT, GL_SHININESS, shininess)

    def render_chamber(self, comp_data):
        """ë°˜ì‘ ì±”ë²„ ë Œë”ë§"""
        # ì™¸ë¶€ ì±”ë²„ (ì›í†µ)
        quadric = gluNewQuadric()
        gluQuadricNormals(quadric, GLU_SMOOTH)

        # ì›í†µ ëª¸ì²´
        gluCylinder(quadric, 1.5, 1.5, 2.0, 32, 16)

        # ìƒë‹¨
        glPushMatrix()
        glTranslatef(0.0, 0.0, 2.0)
        gluDisk(quadric, 0.0, 1.5, 32, 16)
        glPopMatrix()

        # í•˜ë‹¨
        gluDisk(quadric, 0.0, 1.5, 32, 16)

        # ì˜¨ë„ì— ë”°ë¥¸ ë‚´ë¶€ ê¸€ë¡œìš° íš¨ê³¼
        temperature = comp_data.get('temperature', 25.0)
        if temperature > 100.0:
            glDisable(GL_LIGHTING)
            glow_intensity = min(1.0, (temperature - 100.0) / 300.0)
            glColor4f(1.0, 0.5 * glow_intensity, 0.0, 0.3 * glow_intensity)

            # ë‚´ë¶€ êµ¬
            glPushMatrix()
            glTranslatef(0.0, 0.0, 1.0)
            gluSphere(quadric, 1.3, 16, 16)
            glPopMatrix()

            glEnable(GL_LIGHTING)

    def render_gas_inlet(self, comp_data):
        """ê°€ìŠ¤ ì…êµ¬ ë Œë”ë§"""
        quadric = gluNewQuadric()
        gluQuadricNormals(quadric, GLU_SMOOTH)

        # íŒŒì´í”„
        gluCylinder(quadric, 0.15, 0.15, 1.0, 16, 8)

        # ë°¸ë¸Œ (êµ¬)
        glPushMatrix()
        glTranslatef(0.0, 0.0, 0.5)
        gluSphere(quadric, 0.2, 16, 16)
        glPopMatrix()

        # ê°€ìŠ¤ í”Œë¡œìš° í‘œì‹œ
        flow_rate = comp_data.get('flow_rate', 0.0)
        if flow_rate > 0:
            self.generate_gas_particles(comp_data['position'], flow_rate)

    def render_exhaust_port(self, comp_data):
        """ë°°ê¸°êµ¬ ë Œë”ë§"""
        quadric = gluNewQuadric()
        gluQuadricNormals(quadric, GLU_SMOOTH)

        # ë°°ê¸° íŒŒì´í”„
        gluCylinder(quadric, 0.3, 0.5, 1.0, 16, 8)

        # í”Œëœì§€
        glPushMatrix()
        glTranslatef(0.0, 0.0, 1.0)
        gluDisk(quadric, 0.3, 0.7, 24, 4)
        glPopMatrix()

    def render_heater(self, comp_data):
        """íˆí„° ë Œë”ë§"""
        quadric = gluNewQuadric()
        gluQuadricNormals(quadric, GLU_SMOOTH)

        # íˆí„° í”Œë ˆì´íŠ¸
        gluCylinder(quadric, 1.0, 1.0, 0.1, 32, 4)

        # íˆí„° ì½”ì¼ (ìŠ¤í”„ë§ í˜•íƒœ)
        power = comp_data.get('power', 0.0)
        if power > 0:
            glDisable(GL_LIGHTING)
            heat_intensity = min(1.0, power / 1000.0)
            glColor4f(1.0, heat_intensity * 0.5, 0.0, 0.8)

            glBegin(GL_LINE_STRIP)
            for i in range(0, 360 * 3, 10):  # 3íšŒì „
                angle = math.radians(i)
                radius = 0.8 - (i / (360 * 3)) * 0.2
                x = radius * math.cos(angle)
                y = radius * math.sin(angle)
                z = 0.05 + (i / (360 * 3)) * 0.1

                glVertex3f(x, y, z)
            glEnd()

            glEnable(GL_LIGHTING)

    def generate_gas_particles(self, inlet_pos, flow_rate):
        """ê°€ìŠ¤ íŒŒí‹°í´ ìƒì„±"""
        particle_count = int(flow_rate / 10.0)  # ìœ ëŸ‰ì— ë¹„ë¡€í•œ íŒŒí‹°í´ ìˆ˜

        for _ in range(particle_count):
            if len(self.particles) < self.max_particles:
                particle = {
                    'position': list(inlet_pos),
                    'velocity': [
                        random.uniform(-0.1, 0.1),
                        random.uniform(-0.1, 0.1),
                        random.uniform(-0.5, -0.2)
                    ],
                    'life': random.uniform(1.0, 3.0),
                    'size': random.uniform(0.02, 0.05),
                    'color': [0.8, 0.8, 1.0, 0.6]
                }
                self.particles.append(particle)

    def render_particles(self):
        """íŒŒí‹°í´ ë Œë”ë§"""
        glDisable(GL_LIGHTING)
        glEnable(GL_POINT_SMOOTH)

        for particle in self.particles:
            alpha = particle['life'] / 3.0  # ìƒëª…ë ¥ì— ë”°ë¥¸ íˆ¬ëª…ë„
            glColor4f(particle['color'][0], particle['color'][1],
                     particle['color'][2], alpha)

            glPointSize(particle['size'] * 100)
            glBegin(GL_POINTS)
            glVertex3f(particle['position'][0], particle['position'][1], particle['position'][2])
            glEnd()

        glDisable(GL_POINT_SMOOTH)
        glEnable(GL_LIGHTING)

    def render_sensor_overlays(self):
        """ì„¼ì„œ ë°ì´í„° ì˜¤ë²„ë ˆì´ ë Œë”ë§"""
        glDisable(GL_LIGHTING)
        glDisable(GL_DEPTH_TEST)

        # ì˜¨ë„ ì„¼ì„œ ìœ„ì¹˜ì— í…ìŠ¤íŠ¸ í‘œì‹œ
        chamber_data = self.equipment_components['chamber']
        temp = chamber_data.get('temperature', 25.0)

        # 3D ìœ„ì¹˜ë¥¼ 2D ìŠ¤í¬ë¦° ì¢Œí‘œë¡œ ë³€í™˜ (ê°„ë‹¨í•œ êµ¬í˜„)
        glColor3f(1.0, 1.0, 0.0)
        self.render_text_3d([0.0, 2.5, 0.0], f"T: {temp:.1f}Â°C")

        # ì••ë ¥ ì„¼ì„œ
        exhaust_data = self.equipment_components['exhaust_port']
        pressure = exhaust_data.get('pressure', 1.0)
        self.render_text_3d([0.0, -2.5, -2.0], f"P: {pressure:.2f}T")

        glEnable(GL_DEPTH_TEST)
        glEnable(GL_LIGHTING)

    def render_text_3d(self, position, text):
        """3D ê³µê°„ì— í…ìŠ¤íŠ¸ ë Œë”ë§ (ê°„ë‹¨í•œ êµ¬í˜„)"""
        # ì‹¤ì œë¡œëŠ” QOpenGLWidgetì—ì„œ í…ìŠ¤íŠ¸ ë Œë”ë§ì€ ë³µì¡í•¨
        # ì—¬ê¸°ì„œëŠ” ê°„ë‹¨í•œ ë¼ì¸ìœ¼ë¡œ ëŒ€ì²´
        glPushMatrix()
        glTranslatef(position[0], position[1], position[2])

        # í…ìŠ¤íŠ¸ ë°°ê²½ (ì‚¬ê°í˜•)
        glBegin(GL_QUADS)
        glVertex3f(-0.5, -0.1, 0.0)
        glVertex3f(0.5, -0.1, 0.0)
        glVertex3f(0.5, 0.1, 0.0)
        glVertex3f(-0.5, 0.1, 0.0)
        glEnd()

        glPopMatrix()

    def animate(self):
        """ì• ë‹ˆë©”ì´ì…˜ ì—…ë°ì´íŠ¸"""
        # íŒŒí‹°í´ ì—…ë°ì´íŠ¸
        dt = 0.033  # 33ms

        for particle in self.particles[:]:
            # ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            particle['position'][0] += particle['velocity'][0] * dt
            particle['position'][1] += particle['velocity'][1] * dt
            particle['position'][2] += particle['velocity'][2] * dt

            # ìƒëª…ë ¥ ê°ì†Œ
            particle['life'] -= dt

            # ì¤‘ë ¥ íš¨ê³¼
            particle['velocity'][2] -= 0.1 * dt

            # ìƒëª…ë ¥ì´ ë‹¤í•œ íŒŒí‹°í´ ì œê±°
            if particle['life'] <= 0:
                self.particles.remove(particle)

        self.update()

    def update_sensor_data(self):
        """ì„¼ì„œ ë°ì´í„° ì—…ë°ì´íŠ¸ (ì‹œë®¬ë ˆì´ì…˜)"""
        # ì˜¨ë„ ì‹œë®¬ë ˆì´ì…˜
        heater_power = self.equipment_components['heater'].get('power', 0.0)
        current_temp = self.equipment_components['chamber']['temperature']

        # íˆí„° íŒŒì›Œì— ë”°ë¥¸ ì˜¨ë„ ë³€í™”
        target_temp = 25.0 + (heater_power / 1000.0) * 400.0  # ìµœëŒ€ 425Â°C
        temp_change = (target_temp - current_temp) * 0.1  # ëŠë¦° ì˜¨ë„ ë³€í™”

        new_temp = current_temp + temp_change + random.uniform(-2.0, 2.0)
        new_temp = max(20.0, min(500.0, new_temp))  # ì˜¨ë„ ì œí•œ

        self.equipment_components['chamber']['temperature'] = new_temp
        self.sensor_data_updated.emit('chamber_temperature', new_temp)

        # ì••ë ¥ ì‹œë®¬ë ˆì´ì…˜
        gas_flow_total = sum([
            comp.get('flow_rate', 0.0) for comp in self.equipment_components.values()
            if 'flow_rate' in comp
        ])

        base_pressure = 0.1 + (gas_flow_total / 1000.0) * 10.0
        new_pressure = base_pressure + random.uniform(-0.1, 0.1)
        new_pressure = max(0.01, min(20.0, new_pressure))

        self.equipment_components['exhaust_port']['pressure'] = new_pressure
        self.sensor_data_updated.emit('chamber_pressure', new_pressure)

    def mousePressEvent(self, event):
        """ë§ˆìš°ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸"""
        self.last_mouse_pos = event.position()

        # ë ˆì´ìºìŠ¤íŒ…ì„ í†µí•œ ì»´í¬ë„ŒíŠ¸ ì„ íƒ (ê°„ë‹¨í•œ êµ¬í˜„)
        # ì‹¤ì œë¡œëŠ” ë” ë³µì¡í•œ 3D í”¼í‚¹ ì•Œê³ ë¦¬ì¦˜ í•„ìš”
        if event.button() == Qt.LeftButton:
            self.select_component_at_mouse(event.position())

    def mouseMoveEvent(self, event):
        """ë§ˆìš°ìŠ¤ ì´ë™ ì´ë²¤íŠ¸"""
        if self.last_mouse_pos is None:
            return

        dx = event.position().x() - self.last_mouse_pos.x()
        dy = event.position().y() - self.last_mouse_pos.y()

        if event.buttons() & Qt.LeftButton:
            # ì¹´ë©”ë¼ íšŒì „
            self.camera_rotation_y += dx * self.mouse_sensitivity
            self.camera_rotation_x += dy * self.mouse_sensitivity

            # íšŒì „ ì œí•œ
            self.camera_rotation_x = max(-90, min(90, self.camera_rotation_x))

        self.last_mouse_pos = event.position()
        self.update()

    def wheelEvent(self, event):
        """ë§ˆìš°ìŠ¤ íœ  ì´ë²¤íŠ¸ (ì¤Œ)"""
        delta = event.angleDelta().y()
        zoom_factor = 1.1 if delta > 0 else 0.9

        self.camera_distance *= zoom_factor
        self.camera_distance = max(3.0, min(20.0, self.camera_distance))

        self.update()

    def select_component_at_mouse(self, mouse_pos):
        """ë§ˆìš°ìŠ¤ ìœ„ì¹˜ì˜ ì»´í¬ë„ŒíŠ¸ ì„ íƒ"""
        # ê°„ë‹¨í•œ ê±°ë¦¬ ê¸°ë°˜ ì„ íƒ (ì‹¤ì œë¡œëŠ” ë ˆì´ìºìŠ¤íŒ… ì‚¬ìš©)
        # ëª¨ë“  ì»´í¬ë„ŒíŠ¸ ì„ íƒ í•´ì œ
        for comp_data in self.equipment_components.values():
            comp_data['selected'] = False

        # ì²« ë²ˆì§¸ ì»´í¬ë„ŒíŠ¸ ì„ íƒ (ë°ëª¨ìš©)
        component_names = list(self.equipment_components.keys())
        if component_names:
            selected_comp = component_names[0]
            self.equipment_components[selected_comp]['selected'] = True
            self.component_selected.emit(selected_comp)

    def set_component_parameter(self, component_name, parameter, value):
        """ì»´í¬ë„ŒíŠ¸ íŒŒë¼ë¯¸í„° ì„¤ì •"""
        if component_name in self.equipment_components:
            self.equipment_components[component_name][parameter] = value

class Equipment3DController(QWidget):
    """3D ì¥ë¹„ ì œì–´ íŒ¨ë„"""

    def __init__(self, equipment_3d, parent=None):
        super().__init__(parent)
        self.equipment_3d = equipment_3d
        self.setup_ui()
        self.setup_connections()

    def setup_ui(self):
        """UI ì„¤ì •"""
        layout = QVBoxLayout(self)

        # íˆí„° ì œì–´
        heater_group = QVBoxLayout()
        heater_group.addWidget(QLabel("íˆí„° ì œì–´"))

        self.heater_slider = QSlider(Qt.Horizontal)
        self.heater_slider.setRange(0, 1000)
        self.heater_slider.setValue(0)
        self.heater_label = QLabel("Power: 0W")

        heater_group.addWidget(self.heater_label)
        heater_group.addWidget(self.heater_slider)

        layout.addLayout(heater_group)

        # ê°€ìŠ¤ ìœ ëŸ‰ ì œì–´
        gas_group = QVBoxLayout()
        gas_group.addWidget(QLabel("ê°€ìŠ¤ ìœ ëŸ‰ ì œì–´"))

        self.gas1_slider = QSlider(Qt.Horizontal)
        self.gas1_slider.setRange(0, 200)
        self.gas1_label = QLabel("Gas 1: 0 sccm")

        self.gas2_slider = QSlider(Qt.Horizontal)
        self.gas2_slider.setRange(0, 200)
        self.gas2_label = QLabel("Gas 2: 0 sccm")

        gas_group.addWidget(self.gas1_label)
        gas_group.addWidget(self.gas1_slider)
        gas_group.addWidget(self.gas2_label)
        gas_group.addWidget(self.gas2_slider)

        layout.addLayout(gas_group)

        # ì„¼ì„œ ë°ì´í„° í‘œì‹œ
        sensor_group = QVBoxLayout()
        sensor_group.addWidget(QLabel("ì„¼ì„œ ë°ì´í„°"))

        self.temp_label = QLabel("Temperature: --Â°C")
        self.pressure_label = QLabel("Pressure: --T")

        sensor_group.addWidget(self.temp_label)
        sensor_group.addWidget(self.pressure_label)

        layout.addLayout(sensor_group)

    def setup_connections(self):
        """ì‹œê·¸ë„ ì—°ê²°"""
        self.heater_slider.valueChanged.connect(self.on_heater_changed)
        self.gas1_slider.valueChanged.connect(self.on_gas1_changed)
        self.gas2_slider.valueChanged.connect(self.on_gas2_changed)

        self.equipment_3d.component_selected.connect(self.on_component_selected)
        self.equipment_3d.sensor_data_updated.connect(self.on_sensor_data_updated)

    def on_heater_changed(self, value):
        """íˆí„° íŒŒì›Œ ë³€ê²½"""
        self.heater_label.setText(f"Power: {value}W")
        self.equipment_3d.set_component_parameter('heater', 'power', value)

    def on_gas1_changed(self, value):
        """ê°€ìŠ¤1 ìœ ëŸ‰ ë³€ê²½"""
        self.gas1_label.setText(f"Gas 1: {value} sccm")
        self.equipment_3d.set_component_parameter('gas_inlet_1', 'flow_rate', value)

    def on_gas2_changed(self, value):
        """ê°€ìŠ¤2 ìœ ëŸ‰ ë³€ê²½"""
        self.gas2_label.setText(f"Gas 2: {value} sccm")
        self.equipment_3d.set_component_parameter('gas_inlet_2', 'flow_rate', value)

    def on_component_selected(self, component_name):
        """ì»´í¬ë„ŒíŠ¸ ì„ íƒ ì‹œ"""
        print(f"Selected component: {component_name}")

    def on_sensor_data_updated(self, sensor_name, value):
        """ì„¼ì„œ ë°ì´í„° ì—…ë°ì´íŠ¸"""
        if sensor_name == 'chamber_temperature':
            self.temp_label.setText(f"Temperature: {value:.1f}Â°C")
        elif sensor_name == 'chamber_pressure':
            self.pressure_label.setText(f"Pressure: {value:.2f}T")

class Equipment3DViewer(QMainWindow):
    """3D ì¥ë¹„ ë·°ì–´ ë©”ì¸ ìœˆë„ìš°"""

    def __init__(self):
        super().__init__()
        self.setWindowTitle("3D Equipment Viewer")
        self.setGeometry(100, 100, 1200, 800)

        # ì¤‘ì•™ ìœ„ì ¯
        central_widget = QWidget()
        self.setCentralWidget(central_widget)

        # ë ˆì´ì•„ì›ƒ
        layout = QHBoxLayout(central_widget)

        # 3D ë·°
        self.equipment_3d = Interactive3DEquipment()

        # ì œì–´ íŒ¨ë„
        self.controller = Equipment3DController(self.equipment_3d)
        self.controller.setMaximumWidth(300)

        layout.addWidget(self.equipment_3d, 3)
        layout.addWidget(self.controller, 1)

# ë©”ì¸ ì‹¤í–‰
if __name__ == "__main__":
    app = QApplication(sys.argv)

    window = Equipment3DViewer()
    window.show()

    sys.exit(app.exec())
```

</div>

#### **3.2 í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜ ì‹œìŠ¤í…œ**

##### **3.2.1 ë™ì  ëª¨ë“ˆ ë¡œë”© ì‹œìŠ¤í…œ**

<div class="plugin-architecture">

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
import os
import importlib
import importlib.util
from abc import ABC, abstractmethod
from typing import Dict, List, Any, Optional
from PySide6.QtWidgets import (QApplication, QMainWindow, QVBoxLayout, QHBoxLayout,
                               QWidget, QListWidget, QPushButton, QLabel, QTextEdit,
                               QSplitter, QGroupBox, QComboBox, QTabWidget)
from PySide6.QtCore import Qt, Signal, QObject, QThread
import json

class PluginInterface(ABC):
    """í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤ ê¸°ë³¸ í´ë˜ìŠ¤"""

    @abstractmethod
    def get_name(self) -> str:
        """í”ŒëŸ¬ê·¸ì¸ ì´ë¦„ ë°˜í™˜"""
        pass

    @abstractmethod
    def get_version(self) -> str:
        """í”ŒëŸ¬ê·¸ì¸ ë²„ì „ ë°˜í™˜"""
        pass

    @abstractmethod
    def get_description(self) -> str:
        """í”ŒëŸ¬ê·¸ì¸ ì„¤ëª… ë°˜í™˜"""
        pass

    @abstractmethod
    def initialize(self, context: Dict[str, Any]) -> bool:
        """í”ŒëŸ¬ê·¸ì¸ ì´ˆê¸°í™”"""
        pass

    @abstractmethod
    def cleanup(self) -> None:
        """í”ŒëŸ¬ê·¸ì¸ ì •ë¦¬"""
        pass

    @abstractmethod
    def get_widget(self) -> Optional[QWidget]:
        """í”ŒëŸ¬ê·¸ì¸ UI ìœ„ì ¯ ë°˜í™˜"""
        pass

class DataProcessorPlugin(PluginInterface):
    """ë°ì´í„° ì²˜ë¦¬ í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤"""

    @abstractmethod
    def process_data(self, data: Dict[str, Any]) -> Dict[str, Any]:
        """ë°ì´í„° ì²˜ë¦¬"""
        pass

    @abstractmethod
    def get_supported_data_types(self) -> List[str]:
        """ì§€ì›í•˜ëŠ” ë°ì´í„° íƒ€ì… ëª©ë¡"""
        pass

class VisualizationPlugin(PluginInterface):
    """ì‹œê°í™” í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤"""

    @abstractmethod
    def create_visualization(self, data: Dict[str, Any]) -> QWidget:
        """ì‹œê°í™” ìœ„ì ¯ ìƒì„±"""
        pass

    @abstractmethod
    def update_visualization(self, data: Dict[str, Any]) -> None:
        """ì‹œê°í™” ì—…ë°ì´íŠ¸"""
        pass

class CommunicationPlugin(PluginInterface):
    """í†µì‹  í”ŒëŸ¬ê·¸ì¸ ì¸í„°í˜ì´ìŠ¤"""

    @abstractmethod
    def connect(self, config: Dict[str, Any]) -> bool:
        """ì—°ê²° ì„¤ì •"""
        pass

    @abstractmethod
    def disconnect(self) -> None:
        """ì—°ê²° í•´ì œ"""
        pass

    @abstractmethod
    def send_data(self, data: Dict[str, Any]) -> bool:
        """ë°ì´í„° ì „ì†¡"""
        pass

    @abstractmethod
    def receive_data(self) -> Optional[Dict[str, Any]]:
        """ë°ì´í„° ìˆ˜ì‹ """
        pass

class PluginManager(QObject):
    """í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ì"""

    plugin_loaded = Signal(str)
    plugin_unloaded = Signal(str)
    plugin_error = Signal(str, str)

    def __init__(self):
        super().__init__()

        self.plugins: Dict[str, PluginInterface] = {}
        self.plugin_configs: Dict[str, Dict] = {}
        self.plugin_paths: List[str] = ["plugins/"]

        # í”ŒëŸ¬ê·¸ì¸ ì¹´í…Œê³ ë¦¬ë³„ ê´€ë¦¬
        self.data_processors: Dict[str, DataProcessorPlugin] = {}
        self.visualizers: Dict[str, VisualizationPlugin] = {}
        self.communicators: Dict[str, CommunicationPlugin] = {}

    def add_plugin_path(self, path: str):
        """í”ŒëŸ¬ê·¸ì¸ ê²½ë¡œ ì¶”ê°€"""
        if path not in self.plugin_paths:
            self.plugin_paths.append(path)

    def discover_plugins(self) -> List[str]:
        """í”ŒëŸ¬ê·¸ì¸ ë°œê²¬"""
        discovered = []

        for plugin_path in self.plugin_paths:
            if not os.path.exists(plugin_path):
                continue

            for item in os.listdir(plugin_path):
                item_path = os.path.join(plugin_path, item)

                if os.path.isdir(item_path):
                    # ë””ë ‰í† ë¦¬ í˜•íƒœ í”ŒëŸ¬ê·¸ì¸
                    plugin_file = os.path.join(item_path, "plugin.py")
                    if os.path.exists(plugin_file):
                        discovered.append(plugin_file)

                elif item.endswith(".py") and item != "__init__.py":
                    # ë‹¨ì¼ íŒŒì¼ í”ŒëŸ¬ê·¸ì¸
                    discovered.append(item_path)

        return discovered

    def load_plugin(self, plugin_path: str) -> bool:
        """í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ"""
        try:
            # ëª¨ë“ˆ ì´ë¦„ ìƒì„±
            module_name = os.path.splitext(os.path.basename(plugin_path))[0]

            # ëª¨ë“ˆ ìŠ¤í™ ìƒì„±
            spec = importlib.util.spec_from_file_location(module_name, plugin_path)
            if spec is None or spec.loader is None:
                raise ImportError(f"Cannot load plugin spec from {plugin_path}")

            # ëª¨ë“ˆ ìƒì„± ë° ì‹¤í–‰
            module = importlib.util.module_from_spec(spec)
            spec.loader.exec_module(module)

            # í”ŒëŸ¬ê·¸ì¸ í´ë˜ìŠ¤ ì°¾ê¸°
            plugin_class = None
            for attr_name in dir(module):
                attr = getattr(module, attr_name)
                if (isinstance(attr, type) and
                    issubclass(attr, PluginInterface) and
                    attr != PluginInterface):
                    plugin_class = attr
                    break

            if plugin_class is None:
                raise ImportError("No valid plugin class found")

            # í”ŒëŸ¬ê·¸ì¸ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
            plugin_instance = plugin_class()

            # í”ŒëŸ¬ê·¸ì¸ ì´ˆê¸°í™”
            context = {
                'plugin_manager': self,
                'config': self.plugin_configs.get(plugin_instance.get_name(), {})
            }

            if not plugin_instance.initialize(context):
                raise RuntimeError("Plugin initialization failed")

            # í”ŒëŸ¬ê·¸ì¸ ë“±ë¡
            plugin_name = plugin_instance.get_name()
            self.plugins[plugin_name] = plugin_instance

            # ì¹´í…Œê³ ë¦¬ë³„ ë“±ë¡
            if isinstance(plugin_instance, DataProcessorPlugin):
                self.data_processors[plugin_name] = plugin_instance
            elif isinstance(plugin_instance, VisualizationPlugin):
                self.visualizers[plugin_name] = plugin_instance
            elif isinstance(plugin_instance, CommunicationPlugin):
                self.communicators[plugin_name] = plugin_instance

            self.plugin_loaded.emit(plugin_name)
            return True

        except Exception as e:
            error_msg = f"Failed to load plugin {plugin_path}: {str(e)}"
            self.plugin_error.emit(plugin_path, error_msg)
            return False

    def unload_plugin(self, plugin_name: str) -> bool:
        """í”ŒëŸ¬ê·¸ì¸ ì–¸ë¡œë“œ"""
        try:
            if plugin_name not in self.plugins:
                return False

            plugin = self.plugins[plugin_name]

            # í”ŒëŸ¬ê·¸ì¸ ì •ë¦¬
            plugin.cleanup()

            # ì¹´í…Œê³ ë¦¬ë³„ ì œê±°
            if plugin_name in self.data_processors:
                del self.data_processors[plugin_name]
            elif plugin_name in self.visualizers:
                del self.visualizers[plugin_name]
            elif plugin_name in self.communicators:
                del self.communicators[plugin_name]

            # ë©”ì¸ ëª©ë¡ì—ì„œ ì œê±°
            del self.plugins[plugin_name]

            self.plugin_unloaded.emit(plugin_name)
            return True

        except Exception as e:
            error_msg = f"Failed to unload plugin {plugin_name}: {str(e)}"
            self.plugin_error.emit(plugin_name, error_msg)
            return False

    def get_plugin(self, plugin_name: str) -> Optional[PluginInterface]:
        """í”ŒëŸ¬ê·¸ì¸ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜"""
        return self.plugins.get(plugin_name)

    def get_plugins_by_type(self, plugin_type: type) -> Dict[str, PluginInterface]:
        """íƒ€ì…ë³„ í”ŒëŸ¬ê·¸ì¸ ëª©ë¡ ë°˜í™˜"""
        result = {}
        for name, plugin in self.plugins.items():
            if isinstance(plugin, plugin_type):
                result[name] = plugin
        return result

    def load_plugin_config(self, config_path: str):
        """í”ŒëŸ¬ê·¸ì¸ ì„¤ì • ë¡œë“œ"""
        try:
            with open(config_path, 'r', encoding='utf-8') as f:
                self.plugin_configs = json.load(f)
        except Exception as e:
            print(f"Failed to load plugin config: {e}")

    def save_plugin_config(self, config_path: str):
        """í”ŒëŸ¬ê·¸ì¸ ì„¤ì • ì €ì¥"""
        try:
            with open(config_path, 'w', encoding='utf-8') as f:
                json.dump(self.plugin_configs, f, indent=2, ensure_ascii=False)
        except Exception as e:
            print(f"Failed to save plugin config: {e}")

    def process_data_with_plugins(self, data: Dict[str, Any], data_type: str) -> Dict[str, Any]:
        """ë°ì´í„° ì²˜ë¦¬ í”ŒëŸ¬ê·¸ì¸ë“¤ë¡œ ë°ì´í„° ì²˜ë¦¬"""
        result = data.copy()

        for processor in self.data_processors.values():
            if data_type in processor.get_supported_data_types():
                try:
                    result = processor.process_data(result)
                except Exception as e:
                    error_msg = f"Data processing error in {processor.get_name()}: {str(e)}"
                    self.plugin_error.emit(processor.get_name(), error_msg)

        return result

class PluginManagerWidget(QWidget):
    """í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ì UI"""

    def __init__(self, plugin_manager: PluginManager, parent=None):
        super().__init__(parent)
        self.plugin_manager = plugin_manager
        self.setup_ui()
        self.setup_connections()

    def setup_ui(self):
        """UI ì„¤ì •"""
        layout = QVBoxLayout(self)

        # í”ŒëŸ¬ê·¸ì¸ ë°œê²¬ ë° ë¡œë“œ
        discovery_layout = QHBoxLayout()

        self.discover_button = QPushButton("í”ŒëŸ¬ê·¸ì¸ ê²€ìƒ‰")
        self.load_button = QPushButton("ì„ íƒëœ í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ")
        self.unload_button = QPushButton("ì„ íƒëœ í”ŒëŸ¬ê·¸ì¸ ì–¸ë¡œë“œ")

        discovery_layout.addWidget(self.discover_button)
        discovery_layout.addWidget(self.load_button)
        discovery_layout.addWidget(self.unload_button)
        discovery_layout.addStretch()

        layout.addLayout(discovery_layout)

        # í”ŒëŸ¬ê·¸ì¸ ëª©ë¡
        splitter = QSplitter(Qt.Horizontal)

        # ë°œê²¬ëœ í”ŒëŸ¬ê·¸ì¸ ëª©ë¡
        discovered_group = QGroupBox("ë°œê²¬ëœ í”ŒëŸ¬ê·¸ì¸")
        discovered_layout = QVBoxLayout(discovered_group)

        self.discovered_list = QListWidget()
        discovered_layout.addWidget(self.discovered_list)

        splitter.addWidget(discovered_group)

        # ë¡œë“œëœ í”ŒëŸ¬ê·¸ì¸ ëª©ë¡
        loaded_group = QGroupBox("ë¡œë“œëœ í”ŒëŸ¬ê·¸ì¸")
        loaded_layout = QVBoxLayout(loaded_group)

        self.loaded_list = QListWidget()
        loaded_layout.addWidget(self.loaded_list)

        # í”ŒëŸ¬ê·¸ì¸ ìƒì„¸ ì •ë³´
        self.plugin_info = QTextEdit()
        self.plugin_info.setMaximumHeight(100)
        loaded_layout.addWidget(QLabel("í”ŒëŸ¬ê·¸ì¸ ì •ë³´:"))
        loaded_layout.addWidget(self.plugin_info)

        splitter.addWidget(loaded_group)

        layout.addWidget(splitter)

        # í”ŒëŸ¬ê·¸ì¸ ì¹´í…Œê³ ë¦¬ë³„ íƒ­
        self.plugin_tabs = QTabWidget()

        # ë°ì´í„° ì²˜ë¦¬ íƒ­
        self.data_processor_tab = QWidget()
        data_processor_layout = QVBoxLayout(self.data_processor_tab)
        self.data_processor_list = QListWidget()
        data_processor_layout.addWidget(self.data_processor_list)
        self.plugin_tabs.addTab(self.data_processor_tab, "ë°ì´í„° ì²˜ë¦¬")

        # ì‹œê°í™” íƒ­
        self.visualization_tab = QWidget()
        visualization_layout = QVBoxLayout(self.visualization_tab)
        self.visualization_list = QListWidget()
        visualization_layout.addWidget(self.visualization_list)
        self.plugin_tabs.addTab(self.visualization_tab, "ì‹œê°í™”")

        # í†µì‹  íƒ­
        self.communication_tab = QWidget()
        communication_layout = QVBoxLayout(self.communication_tab)
        self.communication_list = QListWidget()
        communication_layout.addWidget(self.communication_list)
        self.plugin_tabs.addTab(self.communication_tab, "í†µì‹ ")

        layout.addWidget(self.plugin_tabs)

    def setup_connections(self):
        """ì‹œê·¸ë„ ì—°ê²°"""
        self.discover_button.clicked.connect(self.discover_plugins)
        self.load_button.clicked.connect(self.load_selected_plugin)
        self.unload_button.clicked.connect(self.unload_selected_plugin)

        self.loaded_list.currentItemChanged.connect(self.on_plugin_selected)

        self.plugin_manager.plugin_loaded.connect(self.on_plugin_loaded)
        self.plugin_manager.plugin_unloaded.connect(self.on_plugin_unloaded)
        self.plugin_manager.plugin_error.connect(self.on_plugin_error)

    def discover_plugins(self):
        """í”ŒëŸ¬ê·¸ì¸ ê²€ìƒ‰"""
        self.discovered_list.clear()

        plugins = self.plugin_manager.discover_plugins()
        for plugin_path in plugins:
            plugin_name = os.path.basename(plugin_path)
            self.discovered_list.addItem(f"{plugin_name} ({plugin_path})")

    def load_selected_plugin(self):
        """ì„ íƒëœ í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ"""
        current_item = self.discovered_list.currentItem()
        if current_item:
            # ê²½ë¡œ ì¶”ì¶œ
            text = current_item.text()
            plugin_path = text.split(" (")[1].rstrip(")")

            self.plugin_manager.load_plugin(plugin_path)

    def unload_selected_plugin(self):
        """ì„ íƒëœ í”ŒëŸ¬ê·¸ì¸ ì–¸ë¡œë“œ"""
        current_item = self.loaded_list.currentItem()
        if current_item:
            plugin_name = current_item.text().split(" - ")[0]
            self.plugin_manager.unload_plugin(plugin_name)

    def on_plugin_loaded(self, plugin_name):
        """í”ŒëŸ¬ê·¸ì¸ ë¡œë“œë¨"""
        plugin = self.plugin_manager.get_plugin(plugin_name)
        if plugin:
            item_text = f"{plugin_name} - {plugin.get_version()}"
            self.loaded_list.addItem(item_text)

            # ì¹´í…Œê³ ë¦¬ë³„ ëª©ë¡ ì—…ë°ì´íŠ¸
            if isinstance(plugin, DataProcessorPlugin):
                self.data_processor_list.addItem(plugin_name)
            elif isinstance(plugin, VisualizationPlugin):
                self.visualization_list.addItem(plugin_name)
            elif isinstance(plugin, CommunicationPlugin):
                self.communication_list.addItem(plugin_name)

    def on_plugin_unloaded(self, plugin_name):
        """í”ŒëŸ¬ê·¸ì¸ ì–¸ë¡œë“œë¨"""
        # ë¡œë“œëœ ëª©ë¡ì—ì„œ ì œê±°
        for i in range(self.loaded_list.count()):
            item = self.loaded_list.item(i)
            if item.text().startswith(plugin_name):
                self.loaded_list.takeItem(i)
                break

        # ì¹´í…Œê³ ë¦¬ë³„ ëª©ë¡ì—ì„œ ì œê±°
        for list_widget in [self.data_processor_list, self.visualization_list, self.communication_list]:
            for i in range(list_widget.count()):
                item = list_widget.item(i)
                if item.text() == plugin_name:
                    list_widget.takeItem(i)
                    break

    def on_plugin_error(self, plugin_name, error_message):
        """í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜"""
        print(f"Plugin Error [{plugin_name}]: {error_message}")

    def on_plugin_selected(self, current, previous):
        """í”ŒëŸ¬ê·¸ì¸ ì„ íƒë¨"""
        if current:
            plugin_name = current.text().split(" - ")[0]
            plugin = self.plugin_manager.get_plugin(plugin_name)

            if plugin:
                info_text = f"""
ì´ë¦„: {plugin.get_name()}
ë²„ì „: {plugin.get_version()}
ì„¤ëª…: {plugin.get_description()}
íƒ€ì…: {type(plugin).__name__}
"""
                self.plugin_info.setText(info_text)

class ModularHMISystem(QMainWindow):
    """ëª¨ë“ˆí˜• HMI ì‹œìŠ¤í…œ"""

    def __init__(self):
        super().__init__()
        self.setWindowTitle("ëª¨ë“ˆí˜• HMI ì‹œìŠ¤í…œ")
        self.setGeometry(100, 100, 1400, 900)

        # í”ŒëŸ¬ê·¸ì¸ ë§¤ë‹ˆì € ì´ˆê¸°í™”
        self.plugin_manager = PluginManager()

        # í”ŒëŸ¬ê·¸ì¸ ë””ë ‰í† ë¦¬ ìƒì„±
        self.create_plugin_directories()

        # ìƒ˜í”Œ í”ŒëŸ¬ê·¸ì¸ ìƒì„±
        self.create_sample_plugins()

        self.setup_ui()

    def create_plugin_directories(self):
        """í”ŒëŸ¬ê·¸ì¸ ë””ë ‰í† ë¦¬ ìƒì„±"""
        os.makedirs("plugins", exist_ok=True)

    def create_sample_plugins(self):
        """ìƒ˜í”Œ í”ŒëŸ¬ê·¸ì¸ ìƒì„±"""
        # ê°„ë‹¨í•œ ë°ì´í„° í•„í„° í”ŒëŸ¬ê·¸ì¸
        sample_plugin_code = '''
from plugin_interfaces import DataProcessorPlugin
from PySide6.QtWidgets import QWidget, QVBoxLayout, QLabel

class SimpleFilterPlugin(DataProcessorPlugin):
    def get_name(self):
        return "Simple Data Filter"

    def get_version(self):
        return "1.0.0"

    def get_description(self):
        return "ê°„ë‹¨í•œ ë°ì´í„° í•„í„°ë§ í”ŒëŸ¬ê·¸ì¸"

    def initialize(self, context):
        return True

    def cleanup(self):
        pass

    def get_widget(self):
        widget = QWidget()
        layout = QVBoxLayout(widget)
        layout.addWidget(QLabel("Simple Filter Plugin"))
        return widget

    def process_data(self, data):
        # ê°„ë‹¨í•œ í•„í„°ë§ ë¡œì§
        filtered_data = data.copy()
        for key, value in data.items():
            if isinstance(value, (int, float)):
                # ì´ìƒì¹˜ ì œê±° (ê°„ë‹¨í•œ ì˜ˆ)
                if abs(value) > 1000:
                    filtered_data[key] = 0
        return filtered_data

    def get_supported_data_types(self):
        return ["sensor_data", "process_data"]
'''

        # í”ŒëŸ¬ê·¸ì¸ íŒŒì¼ ìƒì„±
        with open("plugins/simple_filter.py", "w", encoding="utf-8") as f:
            f.write(sample_plugin_code)

    def setup_ui(self):
        """UI ì„¤ì •"""
        central_widget = QWidget()
        self.setCentralWidget(central_widget)

        layout = QHBoxLayout(central_widget)

        # í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ì UI
        plugin_manager_widget = PluginManagerWidget(self.plugin_manager)
        plugin_manager_widget.setMaximumWidth(600)

        # ë©”ì¸ ì‘ì—… ì˜ì—­
        work_area = QWidget()
        work_layout = QVBoxLayout(work_area)
        work_layout.addWidget(QLabel("ë©”ì¸ ì‘ì—… ì˜ì—­"))
        work_layout.addWidget(QLabel("ì—¬ê¸°ì— í”ŒëŸ¬ê·¸ì¸ë“¤ì´ í†µí•©ë©ë‹ˆë‹¤"))

        layout.addWidget(plugin_manager_widget, 1)
        layout.addWidget(work_area, 2)

# ë©”ì¸ ì‹¤í–‰
if __name__ == "__main__":
    app = QApplication(sys.argv)

    window = ModularHMISystem()
    window.show()

    sys.exit(app.exec())
```

</div>

---

## 4ï¸âƒ£ Hands-on ì‹¤ìŠµ (45ë¶„)
### ğŸš€ **í†µí•© ëª¨ë“ˆí˜• HMI í”Œë«í¼ êµ¬ì¶•**

#### **4.1 ìµœì¢… í”„ë¡œì íŠ¸ ê°œìš”**

<div class="final-project">

**ğŸ¯ ëª©í‘œ**: ëª¨ë“  ê³ ê¸‰ ê¸°ëŠ¥ì„ í†µí•©í•œ ì™„ì „í•œ ëª¨ë“ˆí˜• HMI í”Œë«í¼ êµ¬ì¶•

**ğŸ“‹ í•µì‹¬ êµ¬ì„±ìš”ì†Œ**:
- ì»¤ìŠ¤í…€ ìœ„ì ¯ ê¸°ë°˜ ì „ë¬¸ì  UI
- 3D ì‹œê°í™”ë¥¼ í†µí•œ ì§ê´€ì  ì¥ë¹„ ëª¨ë‹ˆí„°ë§
- í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œì„ í†µí•œ í™•ì¥ ê°€ëŠ¥ì„±
- êµ­ì œí™” ë° í…Œë§ˆ ì§€ì›
- ê³ ì„±ëŠ¥ ì‹¤ì‹œê°„ ë°ì´í„° ì²˜ë¦¬

</div>

#### **4.2 í†µí•© í”Œë«í¼ êµ¬í˜„**

##### **4.2.1 ë©”ì¸ í”Œë«í¼ í´ë˜ìŠ¤**

<div class="integrated-platform">

```python
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

import sys
import os
from datetime import datetime
from PySide6.QtWidgets import (QApplication, QMainWindow, QVBoxLayout, QHBoxLayout,
                               QWidget, QMenuBar, QStatusBar, QDockWidget, QTabWidget,
                               QSplitter, QToolBar, QAction, QLabel, QPushButton,
                               QMessageBox, QFileDialog, QProgressBar)
from PySide6.QtCore import Qt, QTimer, Signal, QSettings, QTranslator, QLocale
from PySide6.QtGui import QIcon, QFont, QPixmap, QActionGroup

# ì´ì „ì— êµ¬í˜„í•œ í´ë˜ìŠ¤ë“¤ import
from advanced_3d_equipment import Interactive3DEquipment, Equipment3DController
from plugin_manager import PluginManager, PluginManagerWidget
from advanced_trend_chart import AdvancedTrendChart
from process_flow_diagram import ProcessFlowDiagram, ProcessControlPanel
from industrial_gauge import IndustrialGauge

class AdvancedHMIPlatform(QMainWindow):
    """í†µí•© ê³ ê¸‰ HMI í”Œë«í¼"""

    # ì‹œê·¸ë„ ì •ì˜
    data_updated = Signal(dict)
    equipment_status_changed = Signal(str, str)
    alarm_triggered = Signal(dict)

    def __init__(self):
        super().__init__()

        # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì •
        self.settings = QSettings("SemiconductorHMI", "AdvancedPlatform")

        # êµ­ì œí™” ì„¤ì •
        self.translator = QTranslator()
        self.current_language = "ko"

        # í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ
        self.plugin_manager = PluginManager()

        # UI ì»´í¬ë„ŒíŠ¸ë“¤
        self.main_tabs = None
        self.status_widgets = {}
        self.charts = {}
        self.equipment_3d = None

        # ë°ì´í„° ê´€ë¦¬
        self.equipment_data = {}
        self.alarm_history = []

        # íƒ€ì´ë¨¸ë“¤
        self.data_timer = QTimer()
        self.status_timer = QTimer()

        self.setup_ui()
        self.setup_menus()
        self.setup_toolbars()
        self.setup_status_bar()
        self.setup_dock_widgets()
        self.load_settings()
        self.setup_connections()

        # ì´ˆê¸°í™” ì™„ë£Œ
        self.statusBar().showMessage("ê³ ê¸‰ HMI í”Œë«í¼ ì¤€ë¹„ ì™„ë£Œ", 3000)

    def setup_ui(self):
        """ë©”ì¸ UI ì„¤ì •"""
        self.setWindowTitle("ê³ ê¸‰ ë°˜ë„ì²´ HMI í”Œë«í¼ v2.0")
        self.setGeometry(100, 100, 1600, 1000)

        # ì¤‘ì•™ ìœ„ì ¯ - íƒ­ ê¸°ë°˜ ì¸í„°í˜ì´ìŠ¤
        self.main_tabs = QTabWidget()
        self.setCentralWidget(self.main_tabs)

        # 1. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ íƒ­
        self.create_monitoring_tab()

        # 2. 3D ì‹œê°í™” íƒ­
        self.create_3d_visualization_tab()

        # 3. í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš° íƒ­
        self.create_process_flow_tab()

        # 4. ë°ì´í„° ë¶„ì„ íƒ­
        self.create_data_analysis_tab()

        # 5. í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ íƒ­
        self.create_plugin_management_tab()

    def create_monitoring_tab(self):
        """ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ íƒ­ ìƒì„±"""
        monitoring_widget = QWidget()
        layout = QHBoxLayout(monitoring_widget)

        # ì¢Œì¸¡ - ê²Œì´ì§€ íŒ¨ë„
        gauge_panel = self.create_gauge_panel()

        # ìš°ì¸¡ - ì°¨íŠ¸ íŒ¨ë„
        chart_panel = self.create_chart_panel()

        # ìŠ¤í”Œë¦¬í„°ë¡œ êµ¬ì„±
        splitter = QSplitter(Qt.Horizontal)
        splitter.addWidget(gauge_panel)
        splitter.addWidget(chart_panel)
        splitter.setStretchFactor(0, 1)
        splitter.setStretchFactor(1, 2)

        layout.addWidget(splitter)
        self.main_tabs.addTab(monitoring_widget, "ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§")

    def create_gauge_panel(self):
        """ê²Œì´ì§€ íŒ¨ë„ ìƒì„±"""
        panel = QWidget()
        layout = QVBoxLayout(panel)

        # ì˜¨ë„ ê²Œì´ì§€
        temp_gauge = IndustrialGauge()
        temp_gauge.setRange(0, 500)
        temp_gauge.setThresholds(300, 400)
        temp_gauge.setValue(25)
        self.status_widgets['temperature'] = temp_gauge

        # ì••ë ¥ ê²Œì´ì§€
        pressure_gauge = IndustrialGauge()
        pressure_gauge.setRange(0, 20)
        pressure_gauge.setThresholds(15, 18)
        pressure_gauge.setValue(1)
        self.status_widgets['pressure'] = pressure_gauge

        # ìœ ëŸ‰ ê²Œì´ì§€
        flow_gauge = IndustrialGauge()
        flow_gauge.setRange(0, 300)
        flow_gauge.setThresholds(250, 280)
        flow_gauge.setValue(0)
        self.status_widgets['flow'] = flow_gauge

        layout.addWidget(QLabel("ì±”ë²„ ì˜¨ë„"))
        layout.addWidget(temp_gauge)
        layout.addWidget(QLabel("ì±”ë²„ ì••ë ¥"))
        layout.addWidget(pressure_gauge)
        layout.addWidget(QLabel("ê°€ìŠ¤ ìœ ëŸ‰"))
        layout.addWidget(flow_gauge)
        layout.addStretch()

        return panel

    def create_chart_panel(self):
        """ì°¨íŠ¸ íŒ¨ë„ ìƒì„±"""
        panel = QWidget()
        layout = QVBoxLayout(panel)

        # ì˜¨ë„ íŠ¸ë Œë“œ ì°¨íŠ¸
        temp_chart = AdvancedTrendChart("ì˜¨ë„ íŠ¸ë Œë“œ")
        temp_chart.add_series("ì±”ë²„ì˜¨ë„", warning_threshold=350, critical_threshold=400)
        self.charts['temperature'] = temp_chart

        # ì••ë ¥ íŠ¸ë Œë“œ ì°¨íŠ¸
        pressure_chart = AdvancedTrendChart("ì••ë ¥ íŠ¸ë Œë“œ")
        pressure_chart.add_series("ì±”ë²„ì••ë ¥", warning_threshold=15, critical_threshold=18)
        self.charts['pressure'] = pressure_chart

        # ì°¨íŠ¸ íƒ­ ìœ„ì ¯
        chart_tabs = QTabWidget()
        chart_tabs.addTab(temp_chart, "ì˜¨ë„")
        chart_tabs.addTab(pressure_chart, "ì••ë ¥")

        layout.addWidget(chart_tabs)
        return panel

    def create_3d_visualization_tab(self):
        """3D ì‹œê°í™” íƒ­ ìƒì„±"""
        viz_widget = QWidget()
        layout = QHBoxLayout(viz_widget)

        # 3D ë·°
        self.equipment_3d = Interactive3DEquipment()

        # 3D ì œì–´ íŒ¨ë„
        controller_3d = Equipment3DController(self.equipment_3d)

        layout.addWidget(self.equipment_3d, 3)
        layout.addWidget(controller_3d, 1)

        self.main_tabs.addTab(viz_widget, "3D ì‹œê°í™”")

    def create_process_flow_tab(self):
        """í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš° íƒ­ ìƒì„±"""
        flow_widget = QWidget()
        layout = QHBoxLayout(flow_widget)

        # í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨
        flow_diagram = ProcessFlowDiagram()

        # ì œì–´ íŒ¨ë„
        control_panel = ProcessControlPanel(flow_diagram)

        layout.addWidget(flow_diagram, 3)
        layout.addWidget(control_panel, 1)

        self.main_tabs.addTab(flow_widget, "í”„ë¡œì„¸ìŠ¤ í”Œë¡œìš°")

    def create_data_analysis_tab(self):
        """ë°ì´í„° ë¶„ì„ íƒ­ ìƒì„±"""
        analysis_widget = QWidget()
        layout = QVBoxLayout(analysis_widget)

        # ë¶„ì„ ë„êµ¬ë“¤
        tools_layout = QHBoxLayout()

        export_button = QPushButton("ë°ì´í„° ë‚´ë³´ë‚´ê¸°")
        export_button.clicked.connect(self.export_data)

        import_button = QPushButton("ë°ì´í„° ê°€ì ¸ì˜¤ê¸°")
        import_button.clicked.connect(self.import_data)

        analyze_button = QPushButton("í†µê³„ ë¶„ì„")
        analyze_button.clicked.connect(self.analyze_data)

        tools_layout.addWidget(export_button)
        tools_layout.addWidget(import_button)
        tools_layout.addWidget(analyze_button)
        tools_layout.addStretch()

        layout.addLayout(tools_layout)

        # ë¶„ì„ ê²°ê³¼ í‘œì‹œ ì˜ì—­
        analysis_display = QLabel("ë¶„ì„ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.")
        analysis_display.setMinimumHeight(400)
        analysis_display.setStyleSheet("border: 1px solid gray; background-color: white;")
        layout.addWidget(analysis_display)

        self.main_tabs.addTab(analysis_widget, "ë°ì´í„° ë¶„ì„")

    def create_plugin_management_tab(self):
        """í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬ íƒ­ ìƒì„±"""
        plugin_widget = PluginManagerWidget(self.plugin_manager)
        self.main_tabs.addTab(plugin_widget, "í”ŒëŸ¬ê·¸ì¸ ê´€ë¦¬")

    def setup_menus(self):
        """ë©”ë‰´ ì„¤ì •"""
        menubar = self.menuBar()

        # íŒŒì¼ ë©”ë‰´
        file_menu = menubar.addMenu("íŒŒì¼")

        new_action = QAction("ìƒˆ í”„ë¡œì íŠ¸", self)
        new_action.setShortcut("Ctrl+N")
        new_action.triggered.connect(self.new_project)
        file_menu.addAction(new_action)

        open_action = QAction("í”„ë¡œì íŠ¸ ì—´ê¸°", self)
        open_action.setShortcut("Ctrl+O")
        open_action.triggered.connect(self.open_project)
        file_menu.addAction(open_action)

        save_action = QAction("í”„ë¡œì íŠ¸ ì €ì¥", self)
        save_action.setShortcut("Ctrl+S")
        save_action.triggered.connect(self.save_project)
        file_menu.addAction(save_action)

        file_menu.addSeparator()

        exit_action = QAction("ì¢…ë£Œ", self)
        exit_action.setShortcut("Ctrl+Q")
        exit_action.triggered.connect(self.close)
        file_menu.addAction(exit_action)

        # ë³´ê¸° ë©”ë‰´
        view_menu = menubar.addMenu("ë³´ê¸°")

        # í…Œë§ˆ ì„ íƒ
        theme_menu = view_menu.addMenu("í…Œë§ˆ")
        self.theme_group = QActionGroup(self)

        themes = [("ê¸°ë³¸", "default"), ("ë‹¤í¬", "dark"), ("ì‚°ì—…ìš©", "industrial")]
        for name, theme_id in themes:
            action = QAction(name, self)
            action.setCheckable(True)
            action.setData(theme_id)
            action.triggered.connect(lambda checked, t=theme_id: self.change_theme(t))
            self.theme_group.addAction(action)
            theme_menu.addAction(action)

        # ì–¸ì–´ ì„ íƒ
        language_menu = view_menu.addMenu("ì–¸ì–´")
        self.language_group = QActionGroup(self)

        languages = [("í•œêµ­ì–´", "ko"), ("English", "en"), ("æ—¥æœ¬èª", "ja")]
        for name, lang_code in languages:
            action = QAction(name, self)
            action.setCheckable(True)
            action.setData(lang_code)
            action.triggered.connect(lambda checked, l=lang_code: self.change_language(l))
            self.language_group.addAction(action)
            language_menu.addAction(action)

        # ë„êµ¬ ë©”ë‰´
        tools_menu = menubar.addMenu("ë„êµ¬")

        calibration_action = QAction("ì„¼ì„œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜", self)
        calibration_action.triggered.connect(self.calibrate_sensors)
        tools_menu.addAction(calibration_action)

        maintenance_action = QAction("ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ", self)
        maintenance_action.triggered.connect(self.enter_maintenance_mode)
        tools_menu.addAction(maintenance_action)

        # ë„ì›€ë§ ë©”ë‰´
        help_menu = menubar.addMenu("ë„ì›€ë§")

        about_action = QAction("ì •ë³´", self)
        about_action.triggered.connect(self.show_about)
        help_menu.addAction(about_action)

    def setup_toolbars(self):
        """íˆ´ë°” ì„¤ì •"""
        # ë©”ì¸ íˆ´ë°”
        main_toolbar = QToolBar("ë©”ì¸")
        self.addToolBar(main_toolbar)

        # ì‹œì‘/ì¤‘ì§€ ë²„íŠ¼
        start_action = QAction("ì‹œì‘", self)
        start_action.setIcon(QIcon("icons/start.png"))
        start_action.triggered.connect(self.start_monitoring)
        main_toolbar.addAction(start_action)

        stop_action = QAction("ì¤‘ì§€", self)
        stop_action.setIcon(QIcon("icons/stop.png"))
        stop_action.triggered.connect(self.stop_monitoring)
        main_toolbar.addAction(stop_action)

        main_toolbar.addSeparator()

        # ë¹„ìƒ ì •ì§€
        emergency_action = QAction("ë¹„ìƒ ì •ì§€", self)
        emergency_action.setIcon(QIcon("icons/emergency.png"))
        emergency_action.triggered.connect(self.emergency_stop)
        main_toolbar.addAction(emergency_action)

        main_toolbar.addSeparator()

        # ìŠ¤í¬ë¦°ìƒ·
        screenshot_action = QAction("ìŠ¤í¬ë¦°ìƒ·", self)
        screenshot_action.triggered.connect(self.take_screenshot)
        main_toolbar.addAction(screenshot_action)

    def setup_status_bar(self):
        """ìƒíƒœë°” ì„¤ì •"""
        status_bar = QStatusBar()
        self.setStatusBar(status_bar)

        # ì—°ê²° ìƒíƒœ
        self.connection_label = QLabel("ì—°ê²°: ëŒ€ê¸°")
        status_bar.addPermanentWidget(self.connection_label)

        # ë°ì´í„° ìˆ˜ì§‘ ìƒíƒœ
        self.data_status_label = QLabel("ë°ì´í„°: ëŒ€ê¸°")
        status_bar.addPermanentWidget(self.data_status_label)

        # ì‹œê°„ í‘œì‹œ
        self.time_label = QLabel()
        status_bar.addPermanentWidget(self.time_label)

        # ì§„í–‰ë¥  ë°”
        self.progress_bar = QProgressBar()
        self.progress_bar.setVisible(False)
        status_bar.addPermanentWidget(self.progress_bar)

    def setup_dock_widgets(self):
        """ë„í‚¹ ìœ„ì ¯ ì„¤ì •"""
        # ì•ŒëŒ íˆìŠ¤í† ë¦¬ ë„í¬
        alarm_dock = QDockWidget("ì•ŒëŒ íˆìŠ¤í† ë¦¬", self)
        alarm_widget = QWidget()
        alarm_layout = QVBoxLayout(alarm_widget)

        from PySide6.QtWidgets import QListWidget
        self.alarm_list = QListWidget()
        alarm_layout.addWidget(self.alarm_list)

        alarm_dock.setWidget(alarm_widget)
        self.addDockWidget(Qt.RightDockWidgetArea, alarm_dock)

        # ì‹œìŠ¤í…œ ë¡œê·¸ ë„í¬
        log_dock = QDockWidget("ì‹œìŠ¤í…œ ë¡œê·¸", self)
        log_widget = QWidget()
        log_layout = QVBoxLayout(log_widget)

        from PySide6.QtWidgets import QTextEdit
        self.log_text = QTextEdit()
        self.log_text.setMaximumHeight(150)
        log_layout.addWidget(self.log_text)

        log_dock.setWidget(log_widget)
        self.addDockWidget(Qt.BottomDockWidgetArea, log_dock)

    def setup_connections(self):
        """ì‹œê·¸ë„ ì—°ê²°"""
        # ë°ì´í„° íƒ€ì´ë¨¸
        self.data_timer.timeout.connect(self.update_data)

        # ìƒíƒœ íƒ€ì´ë¨¸
        self.status_timer.timeout.connect(self.update_status)
        self.status_timer.start(1000)  # 1ì´ˆë§ˆë‹¤

        # í”ŒëŸ¬ê·¸ì¸ ë§¤ë‹ˆì € ì—°ê²°
        self.plugin_manager.plugin_loaded.connect(self.on_plugin_loaded)
        self.plugin_manager.plugin_error.connect(self.on_plugin_error)

        # ì•ŒëŒ ì—°ê²°
        self.alarm_triggered.connect(self.handle_alarm)

        # 3D ì¥ë¹„ ì—°ê²°
        if self.equipment_3d:
            self.equipment_3d.sensor_data_updated.connect(self.update_sensor_display)

    def start_monitoring(self):
        """ëª¨ë‹ˆí„°ë§ ì‹œì‘"""
        self.data_timer.start(100)  # 100ms ê°„ê²©
        self.connection_label.setText("ì—°ê²°: í™œì„±")
        self.data_status_label.setText("ë°ì´í„°: ìˆ˜ì§‘ ì¤‘")
        self.log_message("ëª¨ë‹ˆí„°ë§ ì‹œì‘ë¨")

    def stop_monitoring(self):
        """ëª¨ë‹ˆí„°ë§ ì¤‘ì§€"""
        self.data_timer.stop()
        self.connection_label.setText("ì—°ê²°: ëŒ€ê¸°")
        self.data_status_label.setText("ë°ì´í„°: ëŒ€ê¸°")
        self.log_message("ëª¨ë‹ˆí„°ë§ ì¤‘ì§€ë¨")

    def emergency_stop(self):
        """ë¹„ìƒ ì •ì§€"""
        self.data_timer.stop()
        self.connection_label.setText("ì—°ê²°: ë¹„ìƒì •ì§€")
        self.data_status_label.setText("ë°ì´í„°: ì •ì§€")

        # ëª¨ë“  ì¥ë¹„ ë¹„ìƒ ì •ì§€
        if self.equipment_3d:
            for comp_name in self.equipment_3d.equipment_components:
                self.equipment_3d.set_component_parameter(comp_name, 'power', 0)

        self.log_message("âš ï¸ ë¹„ìƒ ì •ì§€ í™œì„±í™”")

    def update_data(self):
        """ë°ì´í„° ì—…ë°ì´íŠ¸"""
        import random

        # ì‹œë®¬ë ˆì´ì…˜ ë°ì´í„° ìƒì„±
        temp = 25 + random.uniform(-50, 400)
        pressure = 1 + random.uniform(-0.5, 15)
        flow = random.uniform(0, 250)

        # ê²Œì´ì§€ ì—…ë°ì´íŠ¸
        if 'temperature' in self.status_widgets:
            self.status_widgets['temperature'].setValue(temp)
        if 'pressure' in self.status_widgets:
            self.status_widgets['pressure'].setValue(pressure)
        if 'flow' in self.status_widgets:
            self.status_widgets['flow'].setValue(flow)

        # ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        if 'temperature' in self.charts:
            self.charts['temperature'].add_data_point("ì±”ë²„ì˜¨ë„", temp)
        if 'pressure' in self.charts:
            self.charts['pressure'].add_data_point("ì±”ë²„ì••ë ¥", pressure)

        # ì•ŒëŒ ì²´í¬
        if temp > 400:
            self.trigger_alarm("ì˜¨ë„ ê³¼ì—´", f"ì˜¨ë„ê°€ {temp:.1f}Â°Cë¡œ ì„ê³„ê°’ì„ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤.", "critical")
        elif temp > 350:
            self.trigger_alarm("ì˜¨ë„ ê²½ê³ ", f"ì˜¨ë„ê°€ {temp:.1f}Â°Cë¡œ ê²½ê³  ìˆ˜ì¤€ì…ë‹ˆë‹¤.", "warning")

    def update_status(self):
        """ìƒíƒœ ì—…ë°ì´íŠ¸"""
        current_time = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
        self.time_label.setText(current_time)

    def update_sensor_display(self, sensor_name, value):
        """ì„¼ì„œ ë””ìŠ¤í”Œë ˆì´ ì—…ë°ì´íŠ¸"""
        if sensor_name in self.status_widgets:
            self.status_widgets[sensor_name].setValue(value)

    def trigger_alarm(self, title, message, severity):
        """ì•ŒëŒ ë°œìƒ"""
        alarm_data = {
            'title': title,
            'message': message,
            'severity': severity,
            'timestamp': datetime.now()
        }

        self.alarm_triggered.emit(alarm_data)

    def handle_alarm(self, alarm_data):
        """ì•ŒëŒ ì²˜ë¦¬"""
        # ì•ŒëŒ íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
        self.alarm_history.append(alarm_data)

        # ì•ŒëŒ ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        timestamp = alarm_data['timestamp'].strftime("%H:%M:%S")
        severity_icon = "ğŸ”´" if alarm_data['severity'] == "critical" else "ğŸŸ¡"
        item_text = f"{severity_icon} [{timestamp}] {alarm_data['title']}"
        self.alarm_list.addItem(item_text)

        # ë¡œê·¸ ë©”ì‹œì§€
        self.log_message(f"ì•ŒëŒ: {alarm_data['title']} - {alarm_data['message']}")

    def log_message(self, message):
        """ë¡œê·¸ ë©”ì‹œì§€ ì¶”ê°€"""
        timestamp = datetime.now().strftime("%H:%M:%S")
        self.log_text.append(f"[{timestamp}] {message}")

    def change_theme(self, theme_id):
        """í…Œë§ˆ ë³€ê²½"""
        themes = {
            'default': "",
            'dark': """
                QMainWindow { background-color: #2b2b2b; color: white; }
                QWidget { background-color: #2b2b2b; color: white; }
                QTabWidget::pane { background-color: #3c3c3c; }
                QTabBar::tab { background-color: #4a4a4a; color: white; padding: 8px; }
                QTabBar::tab:selected { background-color: #5a5a5a; }
            """,
            'industrial': """
                QMainWindow { background-color: #1a1a2e; color: #eee; }
                QWidget { background-color: #1a1a2e; color: #eee; }
                QPushButton { background-color: #16213e; border: 2px solid #0f3460;
                             color: #eee; padding: 8px; border-radius: 4px; }
                QPushButton:hover { background-color: #0f3460; }
            """
        }

        self.setStyleSheet(themes.get(theme_id, ""))
        self.settings.setValue("theme", theme_id)

    def change_language(self, language_code):
        """ì–¸ì–´ ë³€ê²½"""
        self.current_language = language_code
        self.settings.setValue("language", language_code)

        # ì‹¤ì œ ë²ˆì—­ ì ìš© (ê°„ë‹¨í•œ ì˜ˆì‹œ)
        if language_code == "en":
            self.setWindowTitle("Advanced Semiconductor HMI Platform v2.0")
        elif language_code == "ja":
            self.setWindowTitle("é«˜åº¦åŠå°ä½“HMIãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  v2.0")
        else:
            self.setWindowTitle("ê³ ê¸‰ ë°˜ë„ì²´ HMI í”Œë«í¼ v2.0")

    def load_settings(self):
        """ì„¤ì • ë¡œë“œ"""
        # ìœˆë„ìš° í¬ê¸° ë° ìœ„ì¹˜
        geometry = self.settings.value("geometry")
        if geometry:
            self.restoreGeometry(geometry)

        # í…Œë§ˆ
        theme = self.settings.value("theme", "default")
        self.change_theme(theme)

        # ì–¸ì–´
        language = self.settings.value("language", "ko")
        self.change_language(language)

    def save_settings(self):
        """ì„¤ì • ì €ì¥"""
        self.settings.setValue("geometry", self.saveGeometry())

    def new_project(self):
        """ìƒˆ í”„ë¡œì íŠ¸"""
        self.log_message("ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±")

    def open_project(self):
        """í”„ë¡œì íŠ¸ ì—´ê¸°"""
        file_path, _ = QFileDialog.getOpenFileName(
            self, "í”„ë¡œì íŠ¸ ì—´ê¸°", "", "HMI Project Files (*.hmi)"
        )
        if file_path:
            self.log_message(f"í”„ë¡œì íŠ¸ ì—´ê¸°: {file_path}")

    def save_project(self):
        """í”„ë¡œì íŠ¸ ì €ì¥"""
        file_path, _ = QFileDialog.getSaveFileName(
            self, "í”„ë¡œì íŠ¸ ì €ì¥", "", "HMI Project Files (*.hmi)"
        )
        if file_path:
            self.log_message(f"í”„ë¡œì íŠ¸ ì €ì¥: {file_path}")

    def export_data(self):
        """ë°ì´í„° ë‚´ë³´ë‚´ê¸°"""
        file_path, _ = QFileDialog.getSaveFileName(
            self, "ë°ì´í„° ë‚´ë³´ë‚´ê¸°", "", "CSV Files (*.csv);;JSON Files (*.json)"
        )
        if file_path:
            self.log_message(f"ë°ì´í„° ë‚´ë³´ë‚´ê¸°: {file_path}")

    def import_data(self):
        """ë°ì´í„° ê°€ì ¸ì˜¤ê¸°"""
        file_path, _ = QFileDialog.getOpenFileName(
            self, "ë°ì´í„° ê°€ì ¸ì˜¤ê¸°", "", "CSV Files (*.csv);;JSON Files (*.json)"
        )
        if file_path:
            self.log_message(f"ë°ì´í„° ê°€ì ¸ì˜¤ê¸°: {file_path}")

    def analyze_data(self):
        """ë°ì´í„° ë¶„ì„"""
        self.log_message("ë°ì´í„° ë¶„ì„ ì‹œì‘")

        # ì§„í–‰ë¥  ë°” í‘œì‹œ
        self.progress_bar.setVisible(True)
        self.progress_bar.setValue(0)

        # ë¶„ì„ ì‹œë®¬ë ˆì´ì…˜
        for i in range(101):
            self.progress_bar.setValue(i)
            QApplication.processEvents()

        self.progress_bar.setVisible(False)
        self.log_message("ë°ì´í„° ë¶„ì„ ì™„ë£Œ")

    def calibrate_sensors(self):
        """ì„¼ì„œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜"""
        reply = QMessageBox.question(
            self, "ì„¼ì„œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜",
            "ì„¼ì„œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
            QMessageBox.Yes | QMessageBox.No
        )

        if reply == QMessageBox.Yes:
            self.log_message("ì„¼ì„œ ìº˜ë¦¬ë¸Œë ˆì´ì…˜ ì‹œì‘")

    def enter_maintenance_mode(self):
        """ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ ì§„ì…"""
        self.log_message("ìœ ì§€ë³´ìˆ˜ ëª¨ë“œ ì§„ì…")

    def take_screenshot(self):
        """ìŠ¤í¬ë¦°ìƒ· ì´¬ì˜"""
        pixmap = self.grab()
        file_path, _ = QFileDialog.getSaveFileName(
            self, "ìŠ¤í¬ë¦°ìƒ· ì €ì¥",
            f"screenshot_{datetime.now().strftime('%Y%m%d_%H%M%S')}.png",
            "PNG Files (*.png)"
        )

        if file_path:
            pixmap.save(file_path)
            self.log_message(f"ìŠ¤í¬ë¦°ìƒ· ì €ì¥: {file_path}")

    def show_about(self):
        """ì •ë³´ ëŒ€í™”ìƒì"""
        QMessageBox.about(
            self, "ì •ë³´",
            "ê³ ê¸‰ ë°˜ë„ì²´ HMI í”Œë«í¼ v2.0\n\n"
            "Python PySide6 ê¸°ë°˜ ëª¨ë“ˆí˜• HMI ì‹œìŠ¤í…œ\n"
            "Â© 2024 Semiconductor Manufacturing Co."
        )

    def on_plugin_loaded(self, plugin_name):
        """í”ŒëŸ¬ê·¸ì¸ ë¡œë“œë¨"""
        self.log_message(f"í”ŒëŸ¬ê·¸ì¸ ë¡œë“œë¨: {plugin_name}")

    def on_plugin_error(self, plugin_name, error_message):
        """í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜"""
        self.log_message(f"í”ŒëŸ¬ê·¸ì¸ ì˜¤ë¥˜ [{plugin_name}]: {error_message}")

    def closeEvent(self, event):
        """ìœˆë„ìš° ì¢…ë£Œ ì´ë²¤íŠ¸"""
        self.save_settings()

        # ë°ì´í„° ìˆ˜ì§‘ ì¤‘ì§€
        self.data_timer.stop()
        self.status_timer.stop()

        event.accept()

# ë©”ì¸ ì‹¤í–‰
def main():
    app = QApplication(sys.argv)

    # ì• í”Œë¦¬ì¼€ì´ì…˜ ì •ë³´ ì„¤ì •
    app.setApplicationName("Advanced HMI Platform")
    app.setApplicationVersion("2.0")
    app.setOrganizationName("Semiconductor Manufacturing Co.")

    # ë©”ì¸ ìœˆë„ìš° ìƒì„± ë° í‘œì‹œ
    window = AdvancedHMIPlatform()
    window.show()

    return app.exec()

if __name__ == "__main__":
    sys.exit(main())
```

</div>

#### **4.3 ì‹¤ìŠµ ê³¼ì œ ë° í‰ê°€**

##### **ğŸ¯ ì‹¤ìŠµ ê³¼ì œ (45ë¶„)**

<div class="assignments">

**Phase 1: í”Œë«í¼ í†µí•© (15ë¶„)**
1. **ê¸°ë³¸ í”Œë«í¼ ì‹¤í–‰**: í†µí•© HMI í”Œë«í¼ ì‹¤í–‰ ë° ê¸°ë³¸ ê¸°ëŠ¥ í™•ì¸
2. **í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ**: ìƒ˜í”Œ í”ŒëŸ¬ê·¸ì¸ ë¡œë“œ ë° ë™ì‘ í™•ì¸
3. **3D ì‹œê°í™”**: 3D ì¥ë¹„ ëª¨ë¸ê³¼ ì‹¤ì‹œê°„ ë°ì´í„° ì—°ë™ í™•ì¸

**Phase 2: ê³ ê¸‰ ê¸°ëŠ¥ êµ¬í˜„ (15ë¶„)**
1. **ì»¤ìŠ¤í…€ ìœ„ì ¯**: ìƒˆë¡œìš´ ì‚°ì—…ìš© ìœ„ì ¯ ê°œë°œ ë° í†µí•©
2. **ë°ì´í„° ì²˜ë¦¬**: í”ŒëŸ¬ê·¸ì¸ì„ í†µí•œ ê³ ê¸‰ ë°ì´í„° ë¶„ì„ ê¸°ëŠ¥ ì¶”ê°€
3. **í…Œë§ˆ ì‹œìŠ¤í…œ**: ë‹¤í¬ ëª¨ë“œ ë° ì‚°ì—…ìš© í…Œë§ˆ êµ¬í˜„

**Phase 3: ìµœì í™” ë° í™•ì¥ (15ë¶„)**
1. **ì„±ëŠ¥ ìµœì í™”**: ëŒ€ìš©ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ì„±ëŠ¥ ê°œì„ 
2. **êµ­ì œí™”**: ë‹¤êµ­ì–´ ì§€ì› ê¸°ëŠ¥ ì™„ì„±
3. **ë°°í¬ ì¤€ë¹„**: ì‹¤ì œ ë°°í¬ë¥¼ ìœ„í•œ íŒ¨í‚¤ì§• ì„¤ì •

</div>

##### **ğŸ“Š í‰ê°€ ê¸°ì¤€**

<div class="evaluation">

**ğŸ’¯ í‰ê°€ í•­ëª©**:
- **ì•„í‚¤í…ì²˜ ì„¤ê³„ (30%)**: ëª¨ë“ˆì„±, í™•ì¥ì„±, ìœ ì§€ë³´ìˆ˜ì„±
- **ê¸°ëŠ¥ êµ¬í˜„ (30%)**: ìš”êµ¬ì‚¬í•­ ì¶©ì¡±ë„, ì™„ì„±ë„, ì•ˆì •ì„±
- **ì‚¬ìš©ì ê²½í—˜ (25%)**: UI/UX í’ˆì§ˆ, ì§ê´€ì„±, ì „ë¬¸ì„±
- **ì½”ë“œ í’ˆì§ˆ (15%)**: êµ¬ì¡°í™”, ë¬¸ì„œí™”, ìµœì í™”

**ğŸ† ìš°ìˆ˜ ê¸°ì¤€**:
- ì‹¤ì œ ì‚°ì—… í™˜ê²½ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€ì˜ ì™„ì„±ë„
- í”ŒëŸ¬ê·¸ì¸ì„ í†µí•œ í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ êµ¬í˜„
- ì§ê´€ì ì´ê³  ì „ë¬¸ì ì¸ 3D ì‹œê°í™” êµ¬í˜„
- ë‹¤êµ­ì–´ ë° í…Œë§ˆ ì§€ì›ì„ í†µí•œ ì‚¬ìš©ì ë§ì¶¤í˜• í™˜ê²½

</div>

---

## ğŸ“ **í•™ìŠµ ì •ë¦¬ ë° ë‹¤ìŒ ì£¼ì°¨ ì˜ˆê³ **

### **ğŸ“ ì˜¤ëŠ˜ í•™ìŠµí•œ í•µì‹¬ ë‚´ìš©**
1. **ì»¤ìŠ¤í…€ ìœ„ì ¯ ê°œë°œ**: QPainter í™œìš©í•œ ì „ë¬¸ì  ì‚°ì—…ìš© UI ì»´í¬ë„ŒíŠ¸
2. **ê³ ê¸‰ 3D ì‹œê°í™”**: OpenGL ê¸°ë°˜ ì¸í„°ë™í‹°ë¸Œ ì¥ë¹„ ëª¨ë¸ë§
3. **í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜**: ë™ì  ëª¨ë“ˆ ë¡œë”©ì„ í†µí•œ í™•ì¥ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œ
4. **í†µí•© í”Œë«í¼**: ëª¨ë“  ê³ ê¸‰ ê¸°ëŠ¥ì´ í†µí•©ëœ ëª¨ë“ˆí˜• HMI ì‹œìŠ¤í…œ
5. **êµ­ì œí™” ë° í…Œë§ˆ**: ë‹¤êµ­ì–´ ì§€ì› ë° ì‚¬ìš©ì ë§ì¶¤í˜• í…Œë§ˆ ì‹œìŠ¤í…œ

### **ğŸ”„ Python PySide6 ê³ ê¸‰ ê¸°ëŠ¥ ì™„ì„±ë„**
| ê¸°ëŠ¥ ì˜ì—­ | ì™„ì„±ë„ | ì‹¤ì œ ì ìš© ê°€ëŠ¥ì„± |
|----------|--------|-----------------|
| **ì»¤ìŠ¤í…€ ìœ„ì ¯** | 95% | ì‚°ì—…ìš© ìˆ˜ì¤€ |
| **3D ì‹œê°í™”** | 90% | ê³ ê¸‰ ëª¨ë‹ˆí„°ë§ |
| **í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ** | 85% | í™•ì¥ì„± í™•ë³´ |
| **ì„±ëŠ¥ ìµœì í™”** | 90% | ëŒ€ìš©ëŸ‰ ì²˜ë¦¬ |
| **ì‚¬ìš©ì ê²½í—˜** | 95% | ì „ë¬¸ì  UI/UX |

### **ğŸ“… ë‹¤ìŒ ì£¼ì°¨ ì˜ˆê³ : Python PySide6 ë°°í¬ ë° ìš´ì˜**
- **íŒ¨í‚¤ì§• ë° ë°°í¬**: PyInstaller, cx_Freezeë¥¼ í™œìš©í•œ ë°°í¬ íŒ¨í‚¤ì§€ ìƒì„±
- **í¬ë¡œìŠ¤ í”Œë«í¼ ìµœì í™”**: Windows/Linux/macOS í˜¸í™˜ì„± í™•ë³´
- **ìë™ ì—…ë°ì´íŠ¸**: ì›ê²© ì—…ë°ì´íŠ¸ ì‹œìŠ¤í…œ êµ¬í˜„
- **ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…**: ìš´ì˜ í™˜ê²½ì—ì„œì˜ ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§
- **ë³´ì•ˆ ë° ì¸ì¦**: ì‚°ì—…ìš© ë³´ì•ˆ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±